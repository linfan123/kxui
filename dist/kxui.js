/**
 * method kxui
 * version 1.0.0
 * author Lkx
 * create time 2018.05.31
 * update time 2018.05.31
 */

"use strict";!function(i){function t(){for(var i=document.scripts,t=i.length-1,e=t;e>=0;e--){var o=i[e].src.toLowerCase()||!1;if(o&&o.indexOf("kxui.js")>=0){i=i[e].src.substring(0,i[e].src.lastIndexOf("/")+1);break}}return i}function e(i,t){var e={0:"调用结构不正确",1:"模块 {"+t+"} 不存在",2:"请勿重复调用 {"+t+") 模块"};console.warn("kxui-"+(new h).version+"： "+e[i]+"。")}var o=["method","popup"],s="undefined"!=typeof module&&module instanceof Object&&module.exports instanceof Object,n=navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)?"mobile":"pc",u=function(i){return this.kxui=i,this.module=("string"==typeof this.kxui.module||"function"==typeof this.kxui.module||this.kxui.module instanceof Object)&&this.kxui.module,this.fun="function"==typeof this.kxui.fun?this.kxui.fun:this.module,("function"!=typeof this.kxui.module&&"boolean"!=typeof this.fun||(e(0),"boolean"!=typeof this.fun))&&void this.definition()};u.prototype={definition:function(){this.loadLine=0,this.path=t(),this.isModule()},isModule:function(){"boolean"!=typeof this.module&&"function"!=typeof this.module?this.mode():this.end()},mode:function(){if(s){var i=this.module;"string"==typeof this.module&&(i=[this.module]),this.imports(i)}else this.shunt()},imports:function(i){for(var t=0;t<i.length;t++)if(this.kxui[i[t]])this.kxui[i[t]]?e(2,i[t]):e(1,i[t]);else{var o=i[t];this.kxui[o]=require("./modules/"+i[t])}this.end()},shunt:function(){"string"==typeof this.module?o.indexOf(this.module.toLowerCase())>=0?this.create(this.module,!1):(e(1,this.module),this.end()):this.module instanceof Object&&(o.indexOf(this.module[this.loadLine].toLowerCase())>=0?this.register(this.module[this.loadLine]):(e(1,this.module[this.loadLine]),this.loop(!0)))},register:function(i){this.kxui[i]?this.loadLine<this.module.length-1?(e(2,i),this.loop(!0)):(e(2,i),this.end()):this.create(i,!0)},create:function(i,t){var e=document.getElementsByTagName("body")[0],o=document.createElement("script");o.type="text/javascript",o.async="async",o.charset="utf-8",o.src=this.path+"modules/"+i+".js",e.appendChild(o),this.wait(e,o,t)},wait:function(i,t,e){var o=this;t.onload=function(){i.removeChild(t),o.loop(e)}},loop:function(i){if(this.loadLine=this.loadLine+1,i&&this.module[this.loadLine]&&o.indexOf(this.module[this.loadLine].toLowerCase())>=0)this.register(this.module[this.loadLine]);else if(i&&this.loadLine<this.module.length-1)e(1,this.module[this.loadLine]),this.loop(i);else{var t=i&&this.module[this.loadLine];t&&e(1,this.module[this.loadLine]),this.end()}},end:function(){this.fun("kxui-"+this.kxui.version)}};var h=function(){this.version="1.0.0",this.updateTime="2018.05.31"};h.prototype.use=function(i,t){this.module=i,this.fun=t,this.Load=new u(this),delete this.module,delete this.fun,delete this.Load},h.prototype.info=function(){return{path:t(),device:n,version:this.version+" / "+this.updateTime}},i.kxui=new h,s&&(module.exports=new h)}(window);