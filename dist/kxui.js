/**
 * method kxui
 * version 1.1.0
 * author Lkx
 * create time 2018.05.31
 * update time 2018.06.02
 * website http://www.kxui.org
 */

"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){function e(){for(var t=document.scripts,e=t.length-1,i=e;i>=0;i--){var o=t[i].src.toLowerCase()||!1;if(o&&o.indexOf("kxui.js")>=0){t=t[i].src.substring(0,t[i].src.lastIndexOf("/")+1);break}}return t}function i(t,e){var i={0:"调用结构不正确",1:"模块 {"+e+"} 不存在",2:"请勿重复调用 {"+e+") 模块"};console.warn("kxui-"+(new kxui).version+"： "+i[t]+"。")}var o=["method","popup","lazy"],n="undefined"!=typeof module&&"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports),s=navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)?"mobile":"pc",u=function(t){return this.kxui=t,this.module=("string"==typeof this.kxui.module||"function"==typeof this.kxui.module||"object"===_typeof(this.kxui.module))&&this.kxui.module,this.fun="function"==typeof this.kxui.fun?this.kxui.fun:this.module,("function"!=typeof this.kxui.module&&"boolean"!=typeof this.fun||(i(0),"boolean"!=typeof this.fun))&&void this.definition()};u.prototype={definition:function(){this.loadLine=0,this.path=e(),this.isModule()},isModule:function(){"boolean"!=typeof this.module&&"function"!=typeof this.module?this.mode():this.end()},mode:function(){if(n){var t=this.module;"string"==typeof this.module&&(t=[this.module]),this.imports(t)}else this.shunt()},imports:function(t){for(var e=0;e<t.length;e++)if(this.kxui[t[e]])this.kxui[t[e]]?i(2,t[e]):i(1,t[e]);else{var o=t[e];this.kxui[o]=require("./modules/"+t[e])}this.end()},shunt:function(){"string"==typeof this.module?o.indexOf(this.module.toLowerCase())>=0?this.create(this.module,!1):(i(1,this.module),this.end()):"object"===_typeof(this.module)&&(o.indexOf(this.module[this.loadLine].toLowerCase())>=0?this.register(this.module[this.loadLine]):(i(1,this.module[this.loadLine]),this.loop(!0)))},register:function(t){this.kxui[t]?this.loadLine<this.module.length-1?(i(2,t),this.loop(!0)):(i(2,t),this.end()):this.create(t,!0)},create:function(t,e){var i=document.getElementsByTagName("body")[0],o=document.createElement("script");o.type="text/javascript",o.async="async",o.charset="utf-8",o.src=this.path+"modules/"+t+".js",i.appendChild(o),this.wait(i,o,e)},wait:function(t,e,i){var o=this;e.readyState?e.onreadystatechange=function(){"complete"!==e.readyState&&"loaded"!==e.readyState||(e.onreadystatechange=null,t.removeChild(e),o.loop(i))}:e.onload=function(){t.removeChild(e),o.loop(i)}},loop:function(t){if(this.loadLine=this.loadLine+1,t&&this.module[this.loadLine]&&o.indexOf(this.module[this.loadLine].toLowerCase())>=0)this.register(this.module[this.loadLine]);else if(t&&this.loadLine<this.module.length-1)i(1,this.module[this.loadLine]),this.loop(t);else{var e=t&&this.module[this.loadLine];e&&i(1,this.module[this.loadLine]),this.end()}},end:function(){this.fun("kxui-"+this.kxui.version)}};var d=function(){this.version="1.1.0",this.updateTime="2018.06.02"};d.prototype.use=function(t,e){var i=[];i.module=t,i.fun=e,new u(i)},d.prototype.info=function(){return{path:e(),device:s,version:this.version+" / "+this.updateTime}},t.kxui=new d,n&&(module.exports=new d)}(window);