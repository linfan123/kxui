/**
 * method kxui
 * version 1.2.3
 * author Lkx
 * create time 2018.05.31
 * update time 2018.08.02
 * website http://www.kxui.org
 */

"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function t(){for(var e=document.scripts,t=e.length-1,i=t;i>=0;i--){var o=e[i].src.toLowerCase()||!1;if(o&&o.indexOf("kxui.js")>=0){e=e[i].src.substring(0,e[i].src.lastIndexOf("/")+1);break}}return e}function i(e,t,i,o){var s=i?i:"object"===("undefined"==typeof t?"undefined":_typeof(t))?t:"",n={0:"使用 {use} 不符合结构规范",1:"模块 {"+t+"} 不存在",2:"请勿重复调用 {"+t+") 模块",3:"未能找到 {body} 节点，无法加载 {"+t+"} 模块"};return o?void console.error("kxui-"+s.version+"： "+n[e]+"。"):void console.warn("kxui-"+s.version+"： "+n[e]+"。")}var o=["lazy","method","popup"],s="undefined"!=typeof module&&"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports),n=navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)?"mobile":"pc",u=function(e){return this.kxui=e,this.module=("string"==typeof this.kxui.module||"function"==typeof this.kxui.module||"object"===_typeof(this.kxui.module))&&this.kxui.module,this.fun="function"==typeof this.kxui.fun?this.kxui.fun:"function"==typeof this.module&&this.module,("function"!=typeof this.kxui.module&&"boolean"!=typeof this.fun||(i(0,this.kxui),"boolean"!=typeof this.fun))&&void this.definition()};u.prototype={definition:function(){this.loadLine=0,this.wheelSearch=0,this.domain=t(),this.isModule()},isModule:function(){"boolean"!=typeof this.module&&"function"!=typeof this.module?this.mode():this.end()},mode:function(){if(s){var e=this.module;"string"==typeof this.module&&(e=[this.module]),this.imports(e)}else this.shunt()},imports:function(e){for(var t=0;t<e.length;t++)if(!this.kxui[e[t]]&&o.indexOf(e[t].toLowerCase())>=0){var s=e[t];this.kxui[s]=require("./modules/"+e[t])}else this.kxui[e[t]]?i(2,e[t],this.kxui):i(1,e[t],this.kxui);this.end()},shunt:function(){"string"==typeof this.module?o.indexOf(this.module.toLowerCase())>=0?this.create(this.module,!1):(i(1,this.module,this.kxui),this.end()):"object"===_typeof(this.module)&&(o.indexOf(this.module[this.loadLine].toLowerCase())>=0?this.register(this.module[this.loadLine]):(i(1,this.module[this.loadLine],this.kxui),this.loop(!0)))},register:function(e){this.kxui[e]?this.loadLine<this.module.length-1?(i(2,e,this.kxui),this.loop(!0)):(i(2,e,this.kxui),this.end()):this.create(e,!0)},create:function(e,t){var o=this,s=document.getElementsByTagName("body")[0],n=document.createElement("script");n.type="text/javascript",n.async="async",n.charset="utf-8",n.src=this.domain+"modules/"+e+".js",s?(s.appendChild(n),this.wait(s,n,t)):this.wheelSearch<10?setTimeout(function(){o.wheelSearch=o.wheelSearch+1,o.create(e,t)}):i(3,e,this.kxui,!0)},wait:function(e,t,i){var o=this;t.readyState?t.onreadystatechange=function(){"complete"!==t.readyState&&"loaded"!==t.readyState||(t.onreadystatechange=null,e.removeChild(t),o.loop(i))}:t.onload=function(){e.removeChild(t),o.loop(i)}},loop:function(e){if(this.loadLine=this.loadLine+1,e&&this.module[this.loadLine]&&o.indexOf(this.module[this.loadLine].toLowerCase())>=0)this.register(this.module[this.loadLine]);else if(e&&this.loadLine<this.module.length-1)i(1,this.module[this.loadLine],this.kxui),this.loop(e);else{var t=e&&this.module[this.loadLine];t&&i(1,this.module[this.loadLine],this.kxui),this.end()}},end:function(){this.fun("kxui-"+this.kxui.version)}};var h=function(){this.version="1.2.3",this.updateTime="2018.08.02"};h.prototype.use=function(e,t){this.module=e,this.fun=t,this.load=new u(this),delete this.module,delete this.fun,delete this.load},h.prototype.info=function(){return{domain:t(),device:n,version:this.version+" / "+this.updateTime}},e.kxui=new h,s&&(module.exports=new h)}(window);