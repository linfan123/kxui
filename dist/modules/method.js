/**
 * method kxui
 * version 1.3.2
 * author Lkx
 * create time 2018.05.31
 * update time 2018.11.26
 * website http://www.kxui.org
 */

"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){function e(t,e,r){var o={0:"方法 {"+e+"} 必填字段 {"+r+"} 不能为空",1:"缓存 {"+e+"} 不存在或已过期",2:"DOM {"+e+"} 存在重复或不正确"};console.warn("kxui-"+n.version+"： 模块 {method} "+o[t]+"。")}var n=t.kxui,r="undefined"!=typeof module&&"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports),o=function(){this.name="Method",this.info="Integration of development methods"};o.fn=o.prototype,o.fn.urlData=function(n){if(n){var r=t.location.search.match(new RegExp("[\\?\\&]"+n+"=([^\\&]+)","i"));return!r||r.length<1?"":r[1]}e(0,"urlData","data")},o.fn.repStr=function(t,n,r){return r=r||"",t&&(n||0===n)?(t=String(t),String(t).replace(new RegExp(n,"g"),r)):void e(0,"repStr",t?"app":"str")},o.fn.chaStr=function(t,n,r){if(t=String(t),n=Number(n)||0,r=r||0,t){var o=0,i=t.substr(o,n),a=t.substr(n+1,t.length),s=i+r+a;return s}e(0,"chaStr","str")},o.fn.insStr=function(t,n,r){if(t&&n&&r){t=String(t);var o=t.split(n);return"number"==typeof n?t.slice(0,n)+r+t.slice(n):("string"==typeof n&&o.length>1&&(o[1]=r+o[1],t=o.join(n)),t)}e(0,"insStr",t?n?"app":"after":"str")},o.fn.queStr=function(t,n,r){if(t&&n){t=String(t);var o="boolean"!=typeof r||r,i=o?t.match(new RegExp(n+"(\\S*)")):t.match(new RegExp("(\\S*)"+n));return!i||i.length<1?"":i[1]}e(0,"queStr",t?"app":"str")},o.fn.midStr=function(t,n,r){if(t&&n&&r){t=String(t);var o=t.match(new RegExp(n+"(\\S*)"+r));return!o||o.length<1?"":o[1]}e(0,"midStr",t?n?"aft":"fro":"str")},o.fn.formTest=function(t,n){if(t&&n){var r={};return r.num=/^\d+$/,r.phone=/^0?(13[0-9]|15[012356789]|17[013678]|18[0-9]|14[57])[0-9]{8}$/,r.id=/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[12])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i,r.email=/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/,!(!r[n]||!r[n].test(t))}e(0,"formTest",t?"reg":"data")},o.fn.hasClass=function(t,n){return t&&n?(t=this.getDom(t),0!==n.replace(/\s/g,"").length&&new RegExp(" "+n+" ").test(" "+t.className+" ")):void e(0,"hasClass",t?"cls":"dom")},o.fn.addClass=function(t,n){return t&&n?(t=this.getDom(t),!this.hasClass(t,n)&&(t.className=""===t.className?n:t.className+" "+n,!0)):void e(0,"addClass",t?"cls":"dom")},o.fn.delClass=function(t,n){if(t&&n){if(t=this.getDom(t),this.hasClass(t,n)){for(var r=" "+t.className.replace(/[\t\r\n]/g,"")+" ";r.indexOf(" "+n+" ")>=0;)r=r.replace(" "+n+" "," ");return t.className=r.replace(/^\s+|\s+$/g,""),!0}return!1}e(0,"delClass",t?"cls":"dom")},o.fn.setCache=function(t,n,r){if(t&&n){localStorage.setItem("(method."+t+")",n);var o=parseInt(r);if(o>0){var i=this.dateGet()+o;localStorage.setItem("(method."+t+") (method.time)",i)}return!0}e(0,"setCache",t?"val":"key")},o.fn.getCache=function(t,n){if(t){var r=localStorage.getItem("(method."+t+")"),o=parseInt(localStorage.getItem("(method."+t+") (method.time)"));return o&&o<this.dateGet()&&(e(1,t),this.delCache(t)),r?String(r):"noThrows"===n?"":e(1,t)}e(0,"getCache","key")},o.fn.delCache=function(t){return t?(localStorage.removeItem("(method."+t+")"),localStorage.removeItem("(method."+t+") (method.time)"),!0):void e(0,"delCache","key")},o.fn.compare=function(t,n,r){if(t&&n){var o=Object.getOwnPropertyNames(t),i=Object.getOwnPropertyNames(n);if(o.length!==i.length)return!1;for(var a=0;a<o.length;a++){var s=o[a];if(t[s]!==n[s])return!1}return!0}"noThrows"!==r&&e(0,"compare",t?"dataTwo":"dataOne")},o.fn.setHis=function(t,n){if(t){var r=parseInt(n)||6,o=this.getCache("history","noThrows"),i=[];if(o&&o.length>0){i=JSON.parse(o);for(var a=null,s=null,l=i.length<r?i.length+1:i.length,f=0;f<l;f++){if(this.compare(i[f],t,"noThrows"))return i;0===f?(a=i[f],i[f]=t):(s=i[f],i[f]=a,a=s)}}else i[0]=t;return this.setCache("history",JSON.stringify(i)),i}e(0,"setHis","data")},o.fn.getHis=function(){var t=this.getCache("history","noThrows");return!!t&&JSON.parse(t)},o.fn.delHis=function(){return this.delCache("history")},o.fn.dateGet=function(t){t="boolean"!=typeof t||t;var e=t?Date.parse(new Date):Number(Date.parse(new Date).toString().substr(0,10));return e},o.fn.dateAppoint=function(t){if(t){var n=new Date;return n.setFullYear(t.substring(0,4)),n.setMonth(t.substring(5,7)-1),n.setDate(t.substring(8,10)),n.setHours(t.substring(11,13)),n.setMinutes(t.substring(14,16)),n.setSeconds(t.substring(17,19)),Date.parse(n)/1e3}e(0,"dateAppoint","time")},o.fn.dateTurn=function(t,n,r){if(t){var o=new Date(13===t.toString().length?t:1e3*t),i=n?String(n):"-",a="boolean"!=typeof r||r,s=o.getFullYear(),l=o.getMonth()+1<10?"0"+(o.getMonth()+1):o.getMonth()+1,f=1===o.getDate().toString().length?"0"+o.getDate():o.getDate(),u=1===o.getHours().toString().length?"0"+o.getHours():o.getHours(),c=1===o.getMinutes().toString().length?"0"+o.getMinutes():o.getMinutes(),d=1===o.getSeconds().toString().length?"0"+o.getSeconds():o.getSeconds();return s+i+l+i+f+(a?" "+u+":"+c+":"+d:"")}e(0,"dateTurn","tamp")},o.fn.dateChina=function(t){if(t){var n=6e4,r=60*n,o=24*r,i=this.dateGet(),a=i-(13===String(t).length?t:1e3*t);if(a<0)return;var s=a/n,l=a/r,f=a/o,u=null;return u=s>=1&&s<60?" "+parseInt(s)+" 分钟前":l>=1&&l<24?" "+parseInt(l)+" 小时前":f>=1&&f<2?"昨天":f>=2&&f<3?"前天":f>=3&&f<30?" "+parseInt(f)+" 天前":f>=30?this.dateTurn(t):"刚刚"}e(0,"dateChina","tamp")},o.fn.getDom=function(n,r){r="boolean"==typeof r&&r;var o=function(){return"object"===("undefined"==typeof n?"undefined":_typeof(n))?n:"string"==typeof n?(n=r?t.top.document.querySelectorAll(n):document.querySelectorAll(n),1===n.length?n[0]:0!==n.length&&n):void 0};if(n)try{return n instanceof jQuery?n[0]:o()}catch(i){return o()}e(0,"getDom","dom")},o.fn.addDom=function(t){if(t){var n=document.createElement("div");return n.innerHTML=t,n.childNodes[0]}e(0,"addDom","str")},o.fn.atrDom=function(t,n,r){if(t&&n){if(t=this.getDom(t),t.length)e(2,t);else{if(n&&"string"==typeof n&&r)return t.setAttribute(n,r),!0;if(n&&"string"==typeof n)return t.getAttribute(n)}return!1}e(0,"atrDom",t?"key":"dom")},o.fn.sonDom=function(t){if(t){t=this.getDom(t);var n=t.childNodes;if(n){for(var r=[],o=0;o<n.length;o++)(3!==n[o].nodeType||"#text"!==n[o].nodeName||/\S/.test(n[o].nodeValue))&&r.push(n[o]);return r}return!1}e(0,"sonDom","dom")},o.fn.sonAllDom=function(t,n){function r(t){for(var e=0;e<t.length;e++)"#"+t[e].id===n||"."+t[e].className===n||t[e].tagName===n.toUpperCase()?(i.push(t[e]),o.sonDom(t[e]).length>0&&r(o.sonDom(t[e]))):o.sonDom(t[e]).length>0&&r(o.sonDom(t[e]))}var o=this,i=[];return t&&n?(t=o.getDom(t),r(o.sonDom(t)),i):void e(0,"sonAllDom",t?"father":"dom")},o.fn.random=function(t){if(t){t=Number(t);for(var n="";n.length<t;n+=Math.random().toString(36).substr(2));return n.substr(0,t)}e(0,"random","len")},o.fn.mouse=function(e){var r=e||t.event,o=0,i=0;if("pc"===n.info().device)if(r.pageX)o=r.pageX,i=r.pageY;else{var a=0,s=0;document.documentElement?(s=document.documentElement.scrollTop,a=document.documentElement.scrollLeft):(s=document.body.scrollTop,a=document.body.scrollLeft),o=r.clientX+a,i=r.clientY+s}else{var l=e.changedTouches[0];o=Number(l.pageX),i=Number(l.pageY)}return{x:o,y:i}},o.fn.accAdd=function(t,n){if(t&&n){var r=void 0,o=void 0,i=void 0;try{r=t.toString().split(".")[1].length}catch(a){r=0}try{o=n.toString().split(".")[1].length}catch(a){o=0}return i=Math.pow(10,Math.max(r,o)),(t*i+n*i)/i}e(0,"accAdd",t?"b":"a")},o.fn.accSub=function(t,n){if(t&&n){var r=void 0,o=void 0,i=void 0,a=void 0;try{r=t.toString().split(".")[1].length}catch(s){r=0}try{o=n.toString().split(".")[1].length}catch(s){o=0}return i=Math.pow(10,Math.max(r,o)),a=r>=o?r:o,((t*i-n*i)/i).toFixed(a)}e(0,"accSub",t?"b":"a")},o.fn.accMul=function(t,n){if(t&&n){var r=0,o=t.toString(),i=n.toString();try{r+=o.split(".")[1].length}catch(a){}try{r+=i.split(".")[1].length}catch(a){}return Number(o.replace(".",""))*Number(i.replace(".",""))/Math.pow(10,r)}e(0,"accMul",t?"b":"a")},o.fn.accDiv=function(t,n){if(t&&n){var r=0,o=0,i=void 0,a=void 0;try{r=t.toString().split(".")[1].length}catch(s){}try{o=n.toString().split(".")[1].length}catch(s){}return i=Number(t.toString().replace(".","")),a=Number(n.toString().replace(".","")),i/a*Math.pow(10,o-r)}e(0,"accDiv",t?"b":"a")},o.fn.middle=function(n){if(n){var r=this,o=this.getDom(n),i=o.offsetWidth,a=o.offsetHeight,s=t.innerWidth,l=t.innerHeight,f=(s-i)/2,u=(l-a)/2;o.style.left=f+"px",o.style.top=u+"px",t.onresize=function(){r.middle(n)}}else e(0,"middle","dom")},o.fn.decimal=function(t,n){if(n=n||0,t){var r=parseFloat(t);return isNaN(r)?0:Number(t.toFixed(n))}e(0,"decimal","num")},o.fn.aniHeight=function(t,n,r){function o(t,e){t.style.transition="height "+n+"s",t.style.overflow="hidden",t.style.height=e.offsetHeight+"px"}var i=this.getDom(t);if(n=isNaN(parseFloat(n))?".2":n/1e3,r=r||"kxui-Method-aniHeight",t){if(i&&1===i.children.length)o(i,i.children[0]);else if(this.getDom("#"+r))o(this.getDom("#"+r),i);else{var a=this.addDom('<div id="'+r+'"></div>');i.parentNode.insertBefore(a,i.nextSibling),a.appendChild(i),o(a,i)}return!0}e(0,"aniHeight","dom")},n.method=new o,r&&(n.method=module.exports=new o)}(window);