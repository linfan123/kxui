/**
 * method kxui
 * version 1.2.0
 * author Lkx
 * create time 2018.05.31
 * update time 2018.06.05
 * website http://www.kxui.org
 */

"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function t(e,t,r){var o={0:"方法 {"+t+"} 必填字段 {"+r+"} 不能为空",1:"缓存 {"+t+"} 不存在或已过期",2:"DOM {"+t+"} 存在重复或不正确"};console.warn("kxui-"+n.version+"： "+o[e]+"。")}var n=e.kxui,r="undefined"!=typeof module&&"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports),o=function(){this.name="Method",this.info="Integration of development methods"};o.fn=o.prototype,o.fn.urlData=function(n){if(n){var r=e.location.search.match(new RegExp("[\\?\\&]"+n+"=([^\\&]+)","i"));return!r||r.length<1?"":r[1]}t(0,"urlData","data")},o.fn.repStr=function(e,n,r){return e&&n?e.replace(new RegExp(n,"g"),r?r:""):void t(0,"repStr",e?"app":"str")},o.fn.insStr=function(e,n,r){if(e&&n&&r){var o=e.split(n);return"number"==typeof n?e.slice(0,n)+r+e.slice(n):("string"==typeof n&&o.length>1&&(o[1]=r+o[1],e=o.join(n)),e)}t(0,"insStr",e?n?"app":"after":"str")},o.fn.queStr=function(e,n,r){if(e&&n){var o="boolean"!=typeof r||r,a=o?e.match(new RegExp(n+"(\\S*)")):e.match(new RegExp("(\\S*)"+n));return!a||a.length<1?"":a[1]}t(0,"queStr",e?"app":"str")},o.fn.midStr=function(e,n,r){if(e&&n&&r){var o=e.match(new RegExp(n+"(\\S*)"+r));return!o||o.length<1?"":o[1]}t(0,"midStr",e?n?"aft":"fro":"str")},o.fn.formTest=function(e,n){if(e&&n){var r={};return r.num=/^\d+$/,r.phone=/^0?(13[0-9]|15[012356789]|17[013678]|18[0-9]|14[57])[0-9]{8}$/,r.id=/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[12])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i,r.email=/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/,!(!r[n]||!r[n].test(e))}t(0,"formTest",e?"reg":"data")},o.fn.hasClass=function(e,t){var n=t||"";return 0!==n.replace(/\s/g,"").length&&new RegExp(" "+n+" ").test(" "+e.className+" ")},o.fn.addClass=function(e,t){return!this.hasClass(e,t)&&(e.className=""===e.className?t:e.className+" "+t,!0)},o.fn.delClass=function(e,t){if(this.hasClass(e,t)){for(var n=" "+e.className.replace(/[\t\r\n]/g,"")+" ";n.indexOf(" "+t+" ")>=0;)n=n.replace(" "+t+" "," ");return e.className=n.replace(/^\s+|\s+$/g,""),!0}return!1},o.fn.setCache=function(e,n,r){if(e&&n){localStorage.setItem(e,n);var o=parseInt(r);if(o>0){var a=this.dateGet()+1e3*o;localStorage.setItem(e+" (method.time)",a)}return!0}t(0,"setCache",e?"val":"key")},o.fn.getCache=function(e,n){if(e){var r=localStorage.getItem(e),o=parseInt(localStorage.getItem(e+" (method.time)"));return o&&o<this.dateGet()&&(t(1,e),this.delCache(e)),r?String(r):"noWarn"===n?"":t(1,e)}t(0,"getCache","key")},o.fn.delCache=function(e){return e?(localStorage.removeItem(e),localStorage.removeItem(e+" (method.time)"),!0):void t(0,"delCache","key")},o.fn.compare=function(e,n,r){if(e&&n){var o=Object.getOwnPropertyNames(e),a=Object.getOwnPropertyNames(n);if(o.length!==a.length)return!1;for(var i=0;i<o.length;i++){var s=o[i];if(e[s]!==n[s])return!1}return!0}"noWarn"!==r&&t(0,"compare",e?"dataTwo":"dataOne")},o.fn.setHis=function(e,n){if(e){var r=parseInt(n)||999,o=this.getCache("(method.history)","noWarn"),a=[];if(o&&o.length>0){a=JSON.parse(o);for(var i=null,s=null,f=a.length<r?a.length+1:a.length,u=0;u<f;u++){if(this.compare(a[u],e,"noWarn"))return a;0===u?(i=a[u],a[u]=e):(s=a[u],a[u]=i,i=s)}}else a[0]=e;return this.setCache("(method.history)",JSON.stringify(a)),a}t(0,"setHis","data")},o.fn.getHis=function(){return this.getCache("(method.history)","noWarn")},o.fn.delHis=function(){return this.delCache("(method.history)")},o.fn.dateGet=function(e){var t="boolean"!=typeof e||e,n=t?Date.parse(new Date):Number(Date.parse(new Date).toString().substr(0,10));return n},o.fn.dateTurn=function(e,n,r){if(e){var o=new Date(13===e.toString().length?e:1e3*e),a=n?String(n):"-",i="boolean"!=typeof r||r,s=o.getFullYear(),f=o.getMonth()+1<10?"0"+(o.getMonth()+1):o.getMonth()+1,u=1===o.getDate().toString().length?"0"+o.getDate():o.getDate(),l=1===o.getHours().toString().length?"0"+o.getHours():o.getHours(),c=1===o.getMinutes().toString().length?"0"+o.getMinutes():o.getMinutes(),g=1===o.getSeconds().toString().length?"0"+o.getSeconds():o.getSeconds();return s+a+f+a+u+(i?" "+l+":"+c+":"+g:"")}t(0,"dateTurn","tamp")},o.fn.dateChina=function(e){if(e){var n=6e4,r=60*n,o=24*r,a=this.dateGet(),i=a-(13===String(e).length?e:1e3*e);if(i<0)return;var s=i/n,f=i/r,u=i/o,l=null;return l=s>=1&&s<60?" "+parseInt(s)+" 分钟前":f>=1&&f<24?" "+parseInt(f)+" 小时前":u>=1&&u<2?"昨天":u>=2&&u<3?"前天":u>=3&&u<30?" "+parseInt(u)+" 天前":u>=30?this.dateTurn(e):"刚刚"}t(0,"dateChina","tamp")},o.fn.getDom=function(e){if(e){var n=document.querySelectorAll(e);return 1===n.length?n[0]:0!==n.length&&n}t(0,"getDom","dom")},o.fn.addDom=function(e){if(e){var n=document.createElement("div");return n.innerHTML=e,n.childNodes[0]}t(0,"addDom","str")},o.fn.atrDom=function(e,n,r){if(e&&n){var o="object"===("undefined"==typeof e?"undefined":_typeof(e))?e:this.getDom(e);if(o.length)t(2,e);else{if(n&&"string"==typeof n&&r)return o.setAttribute(n,r),!0;if(n&&"string"==typeof n)return o.getAttribute(n)}return!1}t(0,"atrDom",e?"key":"dom")},r?module.exports=new o:n.method=new o}(window);