/**
 * method kxui
 * version 1.2.1
 * author Lkx
 * create time 2018.05.31
 * update time 2018.07.17
 * website http://www.kxui.org
 */

"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){function e(t,e,r){var o={0:"方法 {"+e+"} 必填字段 {"+r+"} 不能为空",1:"缓存 {"+e+"} 不存在或已过期",2:"DOM {"+e+"} 存在重复或不正确"};console.warn("kxui-"+n.version+"： "+o[t]+"。")}var n=t.kxui,r="undefined"!=typeof module&&"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports),o=function(){this.name="Method",this.info="Integration of development methods"};o.fn=o.prototype,o.fn.urlData=function(n){if(n){var r=t.location.search.match(new RegExp("[\\?\\&]"+n+"=([^\\&]+)","i"));return!r||r.length<1?"":r[1]}e(0,"urlData","data")},o.fn.repStr=function(t,n,r){return t&&n?t.replace(new RegExp(n,"g"),r?r:""):void e(0,"repStr",t?"app":"str")},o.fn.insStr=function(t,n,r){if(t&&n&&r){var o=t.split(n);return"number"==typeof n?t.slice(0,n)+r+t.slice(n):("string"==typeof n&&o.length>1&&(o[1]=r+o[1],t=o.join(n)),t)}e(0,"insStr",t?n?"app":"after":"str")},o.fn.queStr=function(t,n,r){if(t&&n){var o="boolean"!=typeof r||r,a=o?t.match(new RegExp(n+"(\\S*)")):t.match(new RegExp("(\\S*)"+n));return!a||a.length<1?"":a[1]}e(0,"queStr",t?"app":"str")},o.fn.midStr=function(t,n,r){if(t&&n&&r){var o=t.match(new RegExp(n+"(\\S*)"+r));return!o||o.length<1?"":o[1]}e(0,"midStr",t?n?"aft":"fro":"str")},o.fn.formTest=function(t,n){if(t&&n){var r={};return r.num=/^\d+$/,r.phone=/^0?(13[0-9]|15[012356789]|17[013678]|18[0-9]|14[57])[0-9]{8}$/,r.id=/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[12])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i,r.email=/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/,!(!r[n]||!r[n].test(t))}e(0,"formTest",t?"reg":"data")},o.fn.hasClass=function(t,n){return t&&n?(t=this.getDom(t),0!==n.replace(/\s/g,"").length&&new RegExp(" "+n+" ").test(" "+t.className+" ")):void e(0,"hasClass",t?"cls":"dom")},o.fn.addClass=function(t,n){return t&&n?(t=this.getDom(t),!this.hasClass(t,n)&&(t.className=""===t.className?n:t.className+" "+n,!0)):void e(0,"addClass",t?"cls":"dom")},o.fn.delClass=function(t,n){if(t&&n){if(t=this.getDom(t),this.hasClass(t,n)){for(var r=" "+t.className.replace(/[\t\r\n]/g,"")+" ";r.indexOf(" "+n+" ")>=0;)r=r.replace(" "+n+" "," ");return t.className=r.replace(/^\s+|\s+$/g,""),!0}return!1}e(0,"delClass",t?"cls":"dom")},o.fn.setCache=function(t,n,r){if(t&&n){localStorage.setItem(t,n);var o=parseInt(r);if(o>0){var a=this.dateGet()+1e3*o;localStorage.setItem(t+" (method.time)",a)}return!0}e(0,"setCache",t?"val":"key")},o.fn.getCache=function(t,n){if(t){var r=localStorage.getItem(t),o=parseInt(localStorage.getItem(t+" (method.time)"));return o&&o<this.dateGet()&&(e(1,t),this.delCache(t)),r?String(r):"noWarn"===n?"":e(1,t)}e(0,"getCache","key")},o.fn.delCache=function(t){return t?(localStorage.removeItem(t),localStorage.removeItem(t+" (method.time)"),!0):void e(0,"delCache","key")},o.fn.compare=function(t,n,r){if(t&&n){var o=Object.getOwnPropertyNames(t),a=Object.getOwnPropertyNames(n);if(o.length!==a.length)return!1;for(var i=0;i<o.length;i++){var s=o[i];if(t[s]!==n[s])return!1}return!0}"noWarn"!==r&&e(0,"compare",t?"dataTwo":"dataOne")},o.fn.setHis=function(t,n){if(t){var r=parseInt(n)||999,o=this.getCache("(method.history)","noWarn"),a=[];if(o&&o.length>0){a=JSON.parse(o);for(var i=null,s=null,c=a.length<r?a.length+1:a.length,f=0;f<c;f++){if(this.compare(a[f],t,"noWarn"))return a;0===f?(i=a[f],a[f]=t):(s=a[f],a[f]=i,i=s)}}else a[0]=t;return this.setCache("(method.history)",JSON.stringify(a)),a}e(0,"setHis","data")},o.fn.getHis=function(){return this.getCache("(method.history)","noWarn")},o.fn.delHis=function(){return this.delCache("(method.history)")},o.fn.dateGet=function(t){t="boolean"!=typeof t||t;var e=t?Date.parse(new Date):Number(Date.parse(new Date).toString().substr(0,10));return e},o.fn.dateTurn=function(t,n,r){if(t){var o=new Date(13===t.toString().length?t:1e3*t),a=n?String(n):"-",i="boolean"!=typeof r||r,s=o.getFullYear(),c=o.getMonth()+1<10?"0"+(o.getMonth()+1):o.getMonth()+1,f=1===o.getDate().toString().length?"0"+o.getDate():o.getDate(),l=1===o.getHours().toString().length?"0"+o.getHours():o.getHours(),u=1===o.getMinutes().toString().length?"0"+o.getMinutes():o.getMinutes(),d=1===o.getSeconds().toString().length?"0"+o.getSeconds():o.getSeconds();return s+a+c+a+f+(i?" "+l+":"+u+":"+d:"")}e(0,"dateTurn","tamp")},o.fn.dateChina=function(t){if(t){var n=6e4,r=60*n,o=24*r,a=this.dateGet(),i=a-(13===String(t).length?t:1e3*t);if(i<0)return;var s=i/n,c=i/r,f=i/o,l=null;return l=s>=1&&s<60?" "+parseInt(s)+" 分钟前":c>=1&&c<24?" "+parseInt(c)+" 小时前":f>=1&&f<2?"昨天":f>=2&&f<3?"前天":f>=3&&f<30?" "+parseInt(f)+" 天前":f>=30?this.dateTurn(t):"刚刚"}e(0,"dateChina","tamp")},o.fn.getDom=function(t){var n=function(){return"object"===("undefined"==typeof t?"undefined":_typeof(t))?t:"string"==typeof t?(t=document.querySelectorAll(t),1===t.length?t[0]:0!==t.length&&t):void 0};if(t)try{return t instanceof jQuery?t[0]:n()}catch(r){return n()}e(0,"getDom","dom")},o.fn.addDom=function(t){if(t){var n=document.createElement("div");return n.innerHTML=t,n.childNodes[0]}e(0,"addDom","str")},o.fn.atrDom=function(t,n,r){if(t&&n){if(t=this.getDom(t),t.length)e(2,t);else{if(n&&"string"==typeof n&&r)return t.setAttribute(n,r),!0;if(n&&"string"==typeof n)return t.getAttribute(n)}return!1}e(0,"atrDom",t?"key":"dom")},o.fn.random=function(t){if(t){t=Number(t);for(var n="";n.length<t;n+=Math.random().toString(36).substr(2));return n.substr(0,t)}e(0,"random","len")},o.fn.mouse=function(e){var n=e||t.event,r=0,o=0;if(n.pageX)r=n.pageX,o=n.pageY;else{var a=0,i=0;document.documentElement?(i=document.documentElement.scrollTop,a=document.documentElement.scrollLeft):(i=document.body.scrollTop,a=document.body.scrollLeft),r=n.clientX+a,o=n.clientY+i}return{x:r,y:o}},o.fn.accAdd=function(t,n){if(t&&n){var r=void 0,o=void 0,a=void 0;try{r=t.toString().split(".")[1].length}catch(i){r=0}try{o=n.toString().split(".")[1].length}catch(i){o=0}return a=Math.pow(10,Math.max(r,o)),(t*a+n*a)/a}e(0,"accAdd",t?"b":"a")},o.fn.accSub=function(t,n){if(t&&n){var r=void 0,o=void 0,a=void 0,i=void 0;try{r=t.toString().split(".")[1].length}catch(s){r=0}try{o=n.toString().split(".")[1].length}catch(s){o=0}return a=Math.pow(10,Math.max(r,o)),i=r>=o?r:o,((t*a-n*a)/a).toFixed(i)}e(0,"accSub",t?"b":"a")},o.fn.accMul=function(t,n){if(t&&n){var r=0,o=t.toString(),a=n.toString();try{r+=o.split(".")[1].length}catch(i){}try{r+=a.split(".")[1].length}catch(i){}return Number(o.replace(".",""))*Number(a.replace(".",""))/Math.pow(10,r)}e(0,"accMul",t?"b":"a")},o.fn.accDiv=function(t,n){if(t&&n){var r=0,o=0,a=void 0,i=void 0;try{r=t.toString().split(".")[1].length}catch(s){}try{o=n.toString().split(".")[1].length}catch(s){}return a=Number(t.toString().replace(".","")),i=Number(n.toString().replace(".","")),a/i*Math.pow(10,o-r)}e(0,"accDiv",t?"b":"a")},o.fn.middle=function(e){var n=this,r=this.getDom(e),o=r.offsetWidth,a=r.offsetHeight,i=t.innerWidth,s=t.innerHeight,c=(i-o)/2,f=(s-a)/2;r.style.left=c+"px",r.style.top=f+"px",t.onresize=function(){n.middle(e)}},r?module.exports=new o:n.method=new o}(window);