/**
 * method kxui
 * version 1.2.0
 * author Lkx
 * create time 2018.05.31
 * update time 2018.06.05
 * website http://www.kxui.org
 */

"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function t(e,t){var n={0:"容器 {"+t+"} 不存在",1:"当前页面未发现 <img> 标签"};console.warn("kxui-"+o.version+"： "+n[e]+"。")}var o=e.kxui,n="undefined"!=typeof module&&"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports),i=function(e){this.parameter=e,this.threshold=this.parameter.threshold?Number(this.parameter.threshold):0,this.init()};i.prototype={init:function(){var e=this;o.method?e.container():o.use("method",function(){e.container()})},container:function(){var e=this;e.img=o.method.getDom("img"),e.containers=!!e.parameter.container&&o.method.getDom(e.parameter.container),e.parameter.container&&!e.containers?t(0,e.parameter.container):e.img?this["static"]("number"==typeof e.img.length,"number"==typeof e.containers.length):t(1)},"static":function(e,t){var o=this;if(t){o.img=[];for(var n=0;n<o.containers.length;n++){o.img[n]={};for(var i=0,r=o.containers[n].childNodes,s=0;s<r.length;s++)"#text"===r[s].nodeName||/\s/.test(r.nodeValue)||(o.img[n][i]=r[s],o.img[n].lt=i+1,i+=1);o.showImg(e,!0,[o.containers[n],o.img[n]]),o.event(e,!0,[o.containers[n],o.img[n]])}}else o.showImg(e,!!o.containers),o.event(e,!!o.containers)},event:function(t,o,n){var i=this,r="object"===("undefined"==typeof n?"undefined":_typeof(n))?n[0]:i.containers?i.containers:e;r.onscroll=function(){i.showImg(t,o,n)}},showImg:function(e,t,n){var i="object"===("undefined"==typeof n?"undefined":_typeof(n)),r=i?n[1]:this.img,s=t?i?n[0].scrollTop:this.containers.scrollTop:document.documentElement.scrollTop||document.body.scrollTop,c=t?i?n[0].clientHeight:this.containers.clientHeight:document.documentElement.clientHeight||document.body.clientHeight;if(e){for(var a=0;a<r.length;a++)if(r[a].offsetTop-(t?r[a].parentNode.offsetTop:0)<=s+c+this.threshold&&r[a].offsetTop>=s-c-this.threshold){var f=o.method.atrDom(r[a],"lazy-src");o.method.atrDom(r[a],"src",f)}}else if(r.offsetTop-(t?r.parentNode.offsetTop:0)<=s+c+this.threshold&&r.offsetTop>=s-c-this.threshold){var m=o.method.atrDom(r,"lazy-src");o.method.atrDom(r,"src",m)}}};var r=function(){this.name="Lazy",this.info="Lazy loading of pictures"};r.fn=r.prototype,r.fn.load=function(e){this.logic=new i("object"===("undefined"==typeof e?"undefined":_typeof(e))?e:{}),delete this.logic},n?module.exports=new r:o.lazy=new r}(window);