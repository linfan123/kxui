/**
 * method kxui
 * version 1.1.0
 * author Lkx
 * create time 2018.05.31
 * update time 2018.06.02
 * website http://www.kxui.org
 */

"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function t(e,t,o){o&&(t.style.opacity="1",t.style.zIndex=n,t.setAttribute("shade",n),e.setAttribute("shade",n)),i(e),e.style.opacity="1"}function o(t,o,i,a){var n=e.kxui,r=void 0,p=s.query(".kxui-Popup-shade",o),l=s.query(".kxui-Popup-remind",o);if(l&&3===a)t=l,clearTimeout(l.getAttribute("timer"));else if(3===a)return!1;i&&p&&(r=parseInt(t.getAttribute("shade"))===parseInt(p.getAttribute("shade")),r&&(p.style.opacity="0")),n.method.hasClass(s.query("body",o),"kxui-noScrollBar")&&n.method.delClass(s.query("body",o),"kxui-noScrollBar"),t.style.opacity="0",n.method.addClass(t,"kxui-Popup-hide"),setTimeout(function(){try{s.query("body",o).removeChild(t),i&&r&&s.query("body",o).removeChild(p)}catch(e){}},150)}function i(e){n++,e.style.zIndex=n}function a(){var e=s.doc(!1).documentElement.clientWidth,t=s.doc(!1).documentElement.clientHeight,o=s.doc(!0).documentElement.clientWidth,i=s.doc(!0).documentElement.clientHeight;return{docWidth:e,docHeight:t,topWidth:o,topHeight:i}}var n=199202,r=e.kxui.info().path,p=["top","right","bottom","left","center"],l="undefined"!=typeof module&&"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports),s={doc:function(t){return t?e.top.document:document},query:function(e,t){return s.doc(t).querySelector(e)},queryAll:function(e,t){return s.doc(t).querySelectorAll(e)},create:function(e,t){return s.doc(t).createElement(e)}},d=function(e){this.parameter=e,this.alone=this.parameter.alone,this.timer=null,this.init()};d.prototype={init:function(){var t=this;e.kxui.method?(t.method=e.kxui.method,t.skeleton()):e.kxui.use("method",function(){t.method=e.kxui.method,t.skeleton()})},skeleton:function(){4!==this.parameter.type&&(this.bulk=this.method.addDome('<div class="'+(2!==this.parameter.type?"kxui-Popup-bulk":"")+' kxui-Popup-show kxui-Popup-animation" index="'+this.parameter.index+'"></div>'),this.content=this.method.addDome('<div class="kxui-Popup-content"></div>'),this.title=this.method.addDome('<div class="kxui-Popup-title '+(this.alone.closeBtn&&this.alone.shrinkBtn?"kxui-Popup-title-wholeBtn":this.alone.closeBtn||this.alone.shrinkBtn?"kxui-Popup-title-oneBtn":"kxui-Popup-title-noBtn")+'"></div>'),this.shrink=this.method.addDome('<div class="kxui-Popup-shrink kxui-icon '+(this.alone.full?"kxui-icon-min":"kxui-icon-max")+" "+(this.alone.closeBtn?"":"kxui-Popup-shrink-one")+'" shrinkState="'+(this.alone.full?"max":"min")+'"></div>'),this.close=this.method.addDome('<div class="kxui-Popup-close kxui-icon kxui-icon-close"></div>'),this.eventBulk=this.method.addDome('<div class="kxui-Popup-event '+("mobile"===e.kxui.info().device?"kxui-Popup-event-mobile":"")+'"></div>'),this.resize=this.method.addDome('<div class="kxui-Popup-resize"></div>'),this.alone.closeBtn&&this.bulk.appendChild(this.close),this.alone.shrinkBtn&&this.bulk.appendChild(this.shrink)),this.move=this.method.addDome('<div class="kxui-Popup-move"></div>'),this.shade=this.method.addDome('<div class="kxui-Popup-shade '+(this.parameter.shadeClose?"kxui-Popup-shade-pointer":"")+'"></div>'),this.parameter.scrollBar&&this.method.addClass(s.query("body",this.topPage),"kxui-noScrollBar"),this.assemble()},assemble:function(){var t=this,i=t.parameter.type;switch(i){case 0:case 1:if(0===i)t.btn1=t.method.addDome('<div class="'+("mobile"===e.kxui.info().device?"kxui-Popup-btn-mobile":"kxui-Popup-btn")+'">确定</div>'),t.eventBulk.appendChild(t.btn1);else if("object"===_typeof(t.alone.btn)&&1===i)for(var a=1;a<=t.alone.btn.length;a++)t["btn"+a]=t.method.addDome('<div class="'+("mobile"===e.kxui.info().device?"kxui-Popup-btn-mobile":"kxui-Popup-btn")+'">'+t.alone.btn[a-1]+"</div>"),t.eventBulk.appendChild(t["btn"+a]);t.bulk.appendChild(t.title),t.bulk.appendChild(t.content),t.bulk.appendChild(t.eventBulk),t.content.innerHTML=t.parameter.text,t.method.addClass(t.bulk,"kxui-Popup-"+(0===i?"alert":"ask")),t.method.addClass(t.content,"kxui-Popup-"+(0===i?"alert":"ask")+"-content");break;case 2:t.loadingText=t.method.addDome('<p class="kxui-Popup-loading-text '+(2===t.parameter.style?"kxui-Popup-loading-text-special":"")+'">'+(t.parameter.text?t.parameter.text:"")+"</p>");var n={0:function(){for(var e=0;e<5;e++)t.bulk.appendChild(s.create("div")),t.method.addClass(t.bulk,"kxui-Popup-loading-0")},1:function(){for(var e=0;e<3;e++)t.bulk.appendChild(s.create("div")),t.method.addClass(t.bulk,"kxui-Popup-loading-1")},2:function(){for(var e=0;e<8;e++)t.bulk.appendChild(s.create("div")),t.method.addClass(t.bulk,"kxui-Popup-loading-2")}};n[t.parameter.style](),t.bulk.appendChild(t.loadingText),t.method.addClass(t.bulk,t.parameter.shade?"kxui-Popup-loading":"kxui-Popup-loading-noShade");break;case 3:o(t.bulk,t.parameter.topPage,t.shade,t.parameter.type),t.remindText=t.method.addDome("<p>"+t.parameter.text+"</p>"),t.bulk.appendChild(t.remindText),t.method.addClass(t.bulk,"kxui-Popup-remind");break;case 4:t.bulk=[],t.arrow=[],t.content=[];for(var r=0;r<t.alone.dom.length;r++)t.bulk[r]=t.method.addDome('<div class="kxui-Popup-tips kxui-Popup-show kxui-Popup-animation" index="'+this.parameter.index+'"></div>'),t.arrow[r]=t.method.addDome('<div class="kxui-Popup-tips-arrow"></div>'),t.content[r]=t.method.addDome('<div class="kxui-Popup-tips-content">'+t.parameter.text+"</div>"),t.bulk[r].appendChild(t.arrow[r]),t.bulk[r].appendChild(t.content[r]),t.styleStatus(t.bulk[r],t.alone.dom[r]);return;case 5:t.bulk.appendChild(t.resize),t.bulk.appendChild(t.title),t.bulk.appendChild(t.content),"object"!==_typeof(t.parameter.text)||t.parameter.text[1]?(t.iframe=t.method.addDome('<iframe src="'+t.parameter.text+'" frameborder="0" name="'+this.parameter.index+'" id="'+this.parameter.index+'"></iframe>'),t.content.appendChild(t.iframe)):t.content.innerHTML=t.parameter.text[0],t.bulk.style.width=t.alone.size[0],t.bulk.style.height=t.alone.size[1],t.method.addClass(t.bulk,"kxui-Popup-win"),t.method.addClass(t.content,"kxui-Popup-win-content")}t.styleStatus(t.bulk)},styleStatus:function(e,t){var o=this,i="提示";if(void 0===o.parameter.diy.color&&void 0===o.parameter.diy.background)switch(o.parameter.style){case"primary":o.method.addClass(e,3===o.parameter.type?"kxui-Popup-remind-primary":4===o.parameter.type?"kxui-Popup-tips-primary":"kxui-Popup-primary");break;case"success":i="成功",o.method.addClass(e,3===o.parameter.type?"kxui-Popup-remind-success":4===o.parameter.type?"kxui-Popup-tips-success":"kxui-Popup-success");break;case"info":i="信息",o.method.addClass(e,3===o.parameter.type?"kxui-Popup-remind-info":4===o.parameter.type?"kxui-Popup-tips-info":"kxui-Popup-info");break;case"warning":i="警告",o.method.addClass(e,3===o.parameter.type?"kxui-Popup-remind-warning":4===o.parameter.type?"kxui-Popup-tips-warning":"kxui-Popup-warning");break;case"danger":i="错误",o.method.addClass(e,3===o.parameter.type?"kxui-Popup-remind-danger":4===o.parameter.type?"kxui-Popup-tips-danger":"kxui-Popup-danger")}else if(2!==o.parameter.type&&3!==o.parameter.type&&4!==o.parameter.type)o.title.style.cssText="color:"+o.parameter.diy.color+";background:"+o.parameter.diy.background,o.close.style.cssText="color:"+o.parameter.diy.color+";background:"+o.parameter.diy.background,o.shrink.style.cssText="color:"+o.parameter.diy.color+";background:"+o.parameter.diy.background,5!==o.parameter.type&&(o.btn1.style.cssText="color:"+o.parameter.diy.color+";background:"+o.parameter.diy.background),o.content.style.borderTop="1px solid "+o.parameter.diy.background,e.style.border="1px solid "+o.parameter.diy.background,o.method.addClass(e,"kxui-Popup-diy");else if(3===o.parameter.type)o.bulk.style.background=o.parameter.diy.background,o.bulk.childNodes[0].style.color=o.parameter.diy.color;else if(4===o.parameter.type)t.offsetWidth+t.offsetLeft+e.offsetWidth+30>a().docWidth?e.childNodes[0].style.borderLeft="8px solid "+o.parameter.diy.background:e.childNodes[0].style.borderRight="8px solid "+o.parameter.diy.background,e.childNodes[1].style.cssText="color:"+o.parameter.diy.color+";background:"+o.parameter.diy.background;else{o.loadingText.style.color=o.parameter.diy.color;for(var n=0;n<o.bulk.childNodes.length-1;n++)o.bulk.childNodes[n].style.cssText="color:"+o.parameter.diy.color+";border:0 solid "+o.parameter.diy.color+";background-color:"+o.parameter.diy.color}this.title&&(this.title.innerHTML=void 0===this.alone.title?i:this.alone.title),o.into(e,t)},into:function(e,t){var o=this;s.query("body",o.parameter.topPage).appendChild(e),s.query(".kxui-Popup-move",o.parameter.topPage)||s.query("body",o.parameter.topPage).appendChild(o.move),!s.query(".kxui-Popup-shade",o.parameter.topPage)&&o.parameter.shade&&s.query("body",o.parameter.topPage).appendChild(o.shade),o.last(e,t)},last:function(e,o){var i=this;if(4!==i.parameter.type){for(var n=0;n<p.length&&i.parameter.offset!==p[n];n++)n===p.length-1&&(i.parameter.offset="center");5===i.parameter.type&&i.alone.full?(e.style.left="0",e.style.top="0"):("top"===i.parameter.offset?e.style.top="10px":"center"===i.parameter.offset||"left"===i.parameter.offset|"right"===i.parameter.offset?e.style.top=(i.parameter.topPage?a().topHeight:a().docHeight)/2-e.offsetHeight/2-100+"px":"bottom"===i.parameter.offset&&(e.style.bottom="10px"),"left"===i.parameter.offset?e.style.left="10px":"center"===i.parameter.offset||"top"===i.parameter.offset||"bottom"===i.parameter.offset?e.style.left=(i.parameter.topPage?a().topWidth:a().docWidth)/2-e.offsetWidth/2+"px":"right"===i.parameter.offset&&(e.style.right="10px"))}else e.style.top=o.offsetTop+"px",o.offsetWidth+o.offsetLeft+e.offsetWidth+30>a().docWidth?(e.style.left=o.offsetLeft-e.offsetWidth+"px",i.method.addClass(e,"kxui-Popup-tips-right"),i.method.addClass(e.childNodes[0],"kxui-Popup-tips-right-arrow")):e.style.left=o.offsetWidth+o.offsetLeft+"px";t(e,i.shade,i.parameter.shade),i.event(e)},event:function(e){var t=this;if(t.parameter.time&&(this.timer=setTimeout(function(){t.parameter.timeCall(),o(e,t.parameter.topPage,t.shade,t.parameter.type)},t.parameter.time),e.setAttribute("timer",this.timer)),t.alone.shrinkBtn&&(t.shrink.onclick=function(){var e=this.getAttribute("shrinkState");t.method.addClass(t.bulk,"kxui-Popup-animation"),"min"===e?(t.method.addClass(t.bulk,"kxui-Popup-max"),t.method.delClass(t.shrink,"kxui-icon-max"),t.method.addClass(t.shrink,"kxui-icon-min"),this.setAttribute("shrinkState","max")):"max"===e&&(t.method.delClass(t.bulk,"kxui-Popup-max"),t.method.delClass(t.shrink,"kxui-icon-min"),t.method.addClass(t.shrink,"kxui-icon-max"),this.setAttribute("shrinkState","min")),t.alone.shrinkCall(this.getAttribute("shrinkState"))}),t.alone.closeBtn&&(t.close.onclick=function(){t.alone.closeCall(),clearTimeout(t.timer),o(t.bulk,t.parameter.topPage,t.shade,t.parameter.type)}),"object"===_typeof(t.alone.btn)&&1===t.parameter.type)for(var a=1;a<=t.alone.btn.length;a++)t["btn"+a].index=a,t["btn"+a].onclick=function(){t.alone.event["btn"+this.index](t.parameter.index)};else"function"==typeof t.alone.btn&&0===t.parameter.type&&(t.btn1.onclick=function(){clearTimeout(t.timer),o(t.bulk,t.parameter.topPage,t.shade,t.parameter.type),t.alone.btn(t.parameter.index)});t.parameter.shadeClose&&(t.shade.onclick=function(){t.parameter.shadeCall(),clearTimeout(t.timer),o(t.bulk,t.parameter.topPage,t.shade,t.parameter.type)}),t.content&&(t.content.onclick=function(){i(t.bulk)}),t.eventBulk&&(t.eventBulk.onclick=function(){i(t.bulk)}),4!==t.parameter.type&&t.frameOper()},frameOper:function(){function t(t){i(r.bulk),r.event=t||e.event,p=r.method.hasClass(this,"kxui-Popup-resize"),r.method.delClass(r.bulk,"kxui-Popup-show"),r.method.delClass(r.bulk,"kxui-Popup-animation"),r.dowmX=r.event.clientX,r.dowmY=r.event.clientY,s.doc(r.parameter.topPage).addEventListener("mousemove",o),s.doc(r.parameter.topPage).addEventListener("mouseup",n),r.method.addClass(s.query(".kxui-Popup-move",r.parameter.topPage),"kxui-Popup-move-operation")}function o(t){r.event=t||e.event,p?(r.moveWidth=r.saveWidth+(r.event.clientX-r.dowmX),r.moveHeight=r.saveHeight+(r.event.clientY-r.dowmY),r.moveWidth<=260&&(r.moveWidth=260),r.moveHeight<=140&&(r.moveHeight=140),r.bulk.style.width=r.moveWidth+"px",r.bulk.style.height=r.moveHeight+"px"):(r.moveX=r.event.clientX-r.dowmX+r.saveX,r.moveY=r.event.clientY-r.dowmY+r.saveY,r.moveX<=0&&(r.moveX=0),r.moveY<=0&&(r.moveY=0),r.moveX>=(r.parameter.topPage?a().topWidth:a().docWidth)-r.bulk.offsetWidth&&(r.moveX=(r.parameter.topPage?a().topWidth:a().docWidth)-r.bulk.offsetWidth),r.moveY>=(r.parameter.topPage?a().topHeight:a().docHeight)-r.bulk.offsetHeight&&(r.moveY=(r.parameter.topPage?a().topHeight:a().docHeight)-r.bulk.offsetHeight),r.bulk.style.left=r.moveX+"px",r.bulk.style.top=r.moveY+"px",r.bulk.style.right="auto",r.bulk.style.bottom="auto")}function n(){r.saveX=r.bulk.offsetLeft,r.saveY=r.bulk.offsetTop,r.saveWidth=r.bulk.offsetWidth,r.saveHeight=r.bulk.offsetHeight,s.doc(r.parameter.topPage).removeEventListener("mousemove",o,!1),s.doc(r.parameter.topPage).removeEventListener("mouseup",n,!1),r.method.delClass(s.query(".kxui-Popup-move",r.parameter.topPage),"kxui-Popup-move-operation")}var r=this,p=null;r.saveX=r.bulk.offsetLeft,r.saveY=r.bulk.offsetTop,r.saveWidth=r.bulk.offsetWidth,r.saveHeight=r.bulk.offsetHeight,r.title.addEventListener("mousedown",t),r.resize.addEventListener("mousedown",t)}},function(){if(l)require("./../css/popup.css");else{var e=s.create("link");e.media="all",e.type="text/css",e.rel="stylesheet",e.href=r+"css/popup.css",s.query("head").appendChild(e)}}();var u=function(){this.name="Popup",this.info="Window solution"};u.fn=u.prototype,u.fn.alert=function(e,t){var o="object"===("undefined"==typeof t?"undefined":_typeof(t))?t:{};return this.open(0,o,{text:e,closeBtn:"boolean"!=typeof o.closeBtn||o.closeBtn,closeCall:"function"==typeof o.closeCall?o.closeCall:function(){},title:o.title,btn:"function"==typeof o.btn?o.btn:function(){}})},u.fn.ask=function(e){for(var t="object"===("undefined"==typeof e?"undefined":_typeof(e))?e:{},o="object"===_typeof(t.btn)?t.btn:[],i=[],a=1;a<=o.length;a++)i["btn"+a]="function"==typeof t["btn"+a]?t["btn"+a]:function(){};return this.open(1,t,{closeBtn:"boolean"!=typeof t.closeBtn||t.closeBtn,closeCall:"function"==typeof t.closeCall?t.closeCall:function(){},title:t.title,btn:o,event:i})},u.fn.loading=function(e){var t="object"===("undefined"==typeof e?"undefined":_typeof(e))?e:{};return this.open(2,t,{style:"number"==typeof t.style?t.style<=2&&t.style>=0?t.style:0:"string"==typeof t.style&&parseInt(t.style)<=2&&parseInt(t.style)>=0?parseInt(t.style):0})},u.fn.remind=function(e,t,o){var i="object"===("undefined"==typeof o?"undefined":_typeof(o))?o:"object"===("undefined"==typeof t?"undefined":_typeof(t))?t:"object"===("undefined"==typeof e?"undefined":_typeof(e))?e:{};return this.open(3,i,{text:e===i?"":e,time:"string"==typeof t||"number"==typeof t?t:3e3})},u.fn.tips=function(e,t,o){var i=null,a="object"===("undefined"==typeof o?"undefined":_typeof(o))?o:{};return i="string"==typeof t?s.queryAll(t):"number"==typeof t.length?t:{0:t,length:"1"},this.open(4,a,{text:e,dom:i,time:"string"==typeof a.time||"number"==typeof a.time?a.time:3e3})},u.fn.win=function(t){var o="object"===("undefined"==typeof t?"undefined":_typeof(t))?t:{};return this.open(5,o,{size:"boolean"==typeof o.full&&o.full?["100%","100%"]:"object"===_typeof(o.size)?o.size:"mobile"===e.kxui.info().device?["100%","100%"]:["800px","480px"],closeBtn:"boolean"!=typeof o.closeBtn||o.closeBtn,closeCall:"function"==typeof o.closeCall?o.closeCall:function(){},shrinkBtn:"boolean"!=typeof o.shrinkBtn||o.shrinkBtn,shrinkCall:"function"==typeof o.shrinkCall?o.shrinkCall:function(){},full:"boolean"==typeof o.full&&o.full,title:o.title})},u.fn.open=function(e,t,o){var i="object"===_typeof(t.diy)?t.diy:{},a=Math.random();this.skeleton=new d({type:e,text:0===e||3===e||4===e?o.text:5===e?t.content:t.text,style:2===e?o.style:"string"==typeof t.style?t.style:"default",topPage:"boolean"==typeof t.topPage&&t.topPage,shade:"boolean"==typeof t.shade&&t.shade,shadeClose:!("boolean"!=typeof t.shadeClose||!t.shade)&&t.shadeClose,shadeCall:"function"==typeof t.shadeCall&&t.shade&&t.shadeClose?t.shadeCall:function(){},offset:"string"==typeof t.offset?t.offset:"center",scrollBar:"boolean"==typeof t.scrollBar&&t.scrollBar,time:"string"==typeof o.time||"number"==typeof o.time?parseInt(o.time):("string"==typeof t.time||"number"==typeof t.time)&&parseInt(t.time),timeCall:"function"==typeof t.timeCall?t.timeCall:function(){},diy:{color:i.color,background:i.background},index:a,alone:o})},u.fn.close=function(e){var t=e;if("string"==typeof t)switch(e){case"alert":t=["kxui-Popup-alert"];break;case"ask":t=["kxui-Popup-ask"];break;case"loading":t=["kxui-Popup-loading","kxui-Popup-loading-noShade"];break;case"remind":t=["kxui-Popup-remind"];break;case"tips":t=["kxui-Popup-tips"];break;case"win":t=["kxui-Popup-win"]}var o="object"!==("undefined"==typeof t?"undefined":_typeof(t));return this.closeAll(t,o)},u.fn.closeAll=function(e,t){function i(i,n){t?String(i.getAttribute("index"))===String(e)&&o(i,n,!0,null):o(i,n,!0,null),a(i)}function a(e){e.getAttribute("timer")&&clearTimeout(e.getAttribute("timer"))}var n=this;n.cla="object"===("undefined"==typeof e?"undefined":_typeof(e))?e:["kxui-Popup-alert","kxui-Popup-ask","kxui-Popup-loading","kxui-Popup-loading-noShade","kxui-Popup-remind","kxui-Popup-tips","kxui-Popup-win"];for(var r=0;r<n.cla.length;r++){var p=s.queryAll("."+n.cla[r],!0),l=s.queryAll("."+n.cla[r],!1);if(s.doc(!0)===s.doc(!1))for(var d=0;d<l.length;d++)i(l[d],!1);else{for(var u=0;u<l.length;u++)i(l[u],!1);for(var m=0;m<p.length;m++)i(p[m],!0)}}},u.fn.getFrameIndex=function(){return e.name},l?module.exports=new u:e.kxui.popup=new u}(window);