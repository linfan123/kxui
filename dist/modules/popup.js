/**
 * method kxui
 * version 1.2.0
 * author Lkx
 * create time 2018.05.31
 * update time 2018.06.05
 * website http://www.kxui.org
 */

"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function t(e,t,o){o&&(t.style.opacity="1",t.style.zIndex=r,n.method.atrDom(e,"shade",r),n.method.atrDom(t,"shade",r)),a(e),e.style.opacity="1"}function o(e,t,o,a){var i=void 0,r=d.query(".kxui-Popup-shade",t),l=d.query(".kxui-Popup-remind",t);if(l&&3===a)e=l,clearTimeout(n.method.atrDom(l,"timer"));else if(3===a)return!1;o&&r&&(i=parseInt(n.method.atrDom(e,"shade"))===parseInt(n.method.atrDom(r,"shade")),i&&(r.style.opacity="0")),n.method.hasClass(d.query("body",t),"kxui-noScrollBar")&&n.method.delClass(d.query("body",t),"kxui-noScrollBar"),e.style.opacity="0",n.method.addClass(e,"kxui-Popup-hide"),setTimeout(function(){try{d.query("body",t).removeChild(e),o&&i&&d.query("body",t).removeChild(r)}catch(a){}},150)}function a(e){r++,e.style.zIndex=r}function i(){var e=d.doc(!1).documentElement.clientWidth,t=d.doc(!1).documentElement.clientHeight,o=d.doc(!0).documentElement.clientWidth,a=d.doc(!0).documentElement.clientHeight;return{docWidth:e,docHeight:t,topWidth:o,topHeight:a}}var n=e.kxui,r=199202,l=n.info().path,p=["top","right","bottom","left","center"],s="undefined"!=typeof module&&"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports),d={doc:function(t){return t?e.top.document:document},query:function(e,t){return d.doc(t).querySelector(e)},queryAll:function(e,t){return d.doc(t).querySelectorAll(e)},create:function(e,t){return d.doc(t).createElement(e)}},u=function(e){this.parameter=e,this.alone=this.parameter.alone,this.timer=null,this.init()};u.prototype={init:function(){var e=this;n.method?e.skeleton():n.use("method",function(){e.skeleton()})},skeleton:function(){4!==this.parameter.type&&(this.bulk=n.method.addDom('<div class="'+(2!==this.parameter.type?"kxui-Popup-bulk":"")+' kxui-Popup-show kxui-Popup-animation" index="'+this.parameter.index+'"></div>'),this.content=n.method.addDom('<div class="kxui-Popup-content"></div>'),this.title=n.method.addDom('<div class="kxui-Popup-title '+(this.alone.closeBtn&&this.alone.shrinkBtn?"kxui-Popup-title-wholeBtn":this.alone.closeBtn||this.alone.shrinkBtn?"kxui-Popup-title-oneBtn":"kxui-Popup-title-noBtn")+'"></div>'),this.shrink=n.method.addDom('<div class="kxui-Popup-shrink kxui-icon '+(this.alone.full?"kxui-icon-min":"kxui-icon-max")+" "+(this.alone.closeBtn?"":"kxui-Popup-shrink-one")+'" shrinkState="'+(this.alone.full?"max":"min")+'"></div>'),this.close=n.method.addDom('<div class="kxui-Popup-close kxui-icon kxui-icon-close"></div>'),this.eventBulk=n.method.addDom('<div class="kxui-Popup-event '+("mobile"===n.info().device?"kxui-Popup-event-mobile":"")+'"></div>'),this.resize=n.method.addDom('<div class="kxui-Popup-resize"></div>'),this.alone.closeBtn&&this.bulk.appendChild(this.close),this.alone.shrinkBtn&&this.bulk.appendChild(this.shrink)),this.move=n.method.addDom('<div class="kxui-Popup-move"></div>'),this.shade=n.method.addDom('<div class="kxui-Popup-shade '+(this.parameter.shadeClose?"kxui-Popup-shade-pointer":"")+'"></div>'),this.parameter.scrollBar&&n.method.addClass(d.query("body",this.topPage),"kxui-noScrollBar"),this.assemble()},assemble:function(){var e=this,t=e.parameter.type;switch(t){case 0:case 1:if(0===t)e.btn1=n.method.addDom('<div class="'+("mobile"===n.info().device?"kxui-Popup-btn-mobile":"kxui-Popup-btn")+'">确定</div>'),e.eventBulk.appendChild(e.btn1);else if("object"===_typeof(e.alone.btn)&&1===t)for(var a=1;a<=e.alone.btn.length;a++)e["btn"+a]=n.method.addDom('<div class="'+("mobile"===n.info().device?"kxui-Popup-btn-mobile":"kxui-Popup-btn")+'">'+e.alone.btn[a-1]+"</div>"),e.eventBulk.appendChild(e["btn"+a]);e.bulk.appendChild(e.title),e.bulk.appendChild(e.content),e.bulk.appendChild(e.eventBulk),e.content.innerHTML=e.parameter.text,n.method.addClass(e.bulk,"kxui-Popup-"+(0===t?"alert":"ask")),n.method.addClass(e.content,"kxui-Popup-"+(0===t?"alert":"ask")+"-content");break;case 2:e.loadingText=n.method.addDom('<p class="kxui-Popup-loading-text '+(2===e.parameter.style?"kxui-Popup-loading-text-special":"")+'">'+(e.parameter.text?e.parameter.text:"")+"</p>");var i={0:function(){for(var t=0;t<5;t++)e.bulk.appendChild(d.create("div")),n.method.addClass(e.bulk,"kxui-Popup-loading-0")},1:function(){for(var t=0;t<3;t++)e.bulk.appendChild(d.create("div")),n.method.addClass(e.bulk,"kxui-Popup-loading-1")},2:function(){for(var t=0;t<8;t++)e.bulk.appendChild(d.create("div")),n.method.addClass(e.bulk,"kxui-Popup-loading-2")}};i[e.parameter.style](),e.bulk.appendChild(e.loadingText),n.method.addClass(e.bulk,e.parameter.shade?"kxui-Popup-loading":"kxui-Popup-loading-noShade");break;case 3:o(e.bulk,e.parameter.topPage,e.shade,e.parameter.type),e.remindText=n.method.addDom("<p>"+e.parameter.text+"</p>"),e.bulk.appendChild(e.remindText),n.method.addClass(e.bulk,"kxui-Popup-remind");break;case 4:e.bulk=[],e.arrow=[],e.content=[];for(var r=0;r<e.alone.dom.length;r++)e.bulk[r]=n.method.addDom('<div class="kxui-Popup-tips kxui-Popup-show kxui-Popup-animation" index="'+this.parameter.index+'"></div>'),e.arrow[r]=n.method.addDom('<div class="kxui-Popup-tips-arrow"></div>'),e.content[r]=n.method.addDom('<div class="kxui-Popup-tips-content">'+e.parameter.text+"</div>"),e.bulk[r].appendChild(e.arrow[r]),e.bulk[r].appendChild(e.content[r]),e.styleStatus(e.bulk[r],e.alone.dom[r]);return;case 5:e.bulk.appendChild(e.resize),e.bulk.appendChild(e.title),e.bulk.appendChild(e.content),"object"!==_typeof(e.parameter.text)||e.parameter.text[1]?(e.iframe=n.method.addDom('<iframe src="'+e.parameter.text+'" frameborder="0" name="'+this.parameter.index+'" id="'+this.parameter.index+'"></iframe>'),e.content.appendChild(e.iframe)):e.content.innerHTML=e.parameter.text[0],e.bulk.style.width=e.alone.size[0],e.bulk.style.height=e.alone.size[1],n.method.addClass(e.bulk,"kxui-Popup-win"),n.method.addClass(e.content,"kxui-Popup-win-content")}e.styleStatus(e.bulk)},styleStatus:function(e,t){var o=this,a="提示";if(void 0===o.parameter.diy.color&&void 0===o.parameter.diy.background)switch(o.parameter.style){case"primary":n.method.addClass(e,3===o.parameter.type?"kxui-Popup-remind-primary":4===o.parameter.type?"kxui-Popup-tips-primary":"kxui-Popup-primary");break;case"success":a="成功",n.method.addClass(e,3===o.parameter.type?"kxui-Popup-remind-success":4===o.parameter.type?"kxui-Popup-tips-success":"kxui-Popup-success");break;case"info":a="信息",n.method.addClass(e,3===o.parameter.type?"kxui-Popup-remind-info":4===o.parameter.type?"kxui-Popup-tips-info":"kxui-Popup-info");break;case"warning":a="警告",n.method.addClass(e,3===o.parameter.type?"kxui-Popup-remind-warning":4===o.parameter.type?"kxui-Popup-tips-warning":"kxui-Popup-warning");break;case"danger":a="错误",n.method.addClass(e,3===o.parameter.type?"kxui-Popup-remind-danger":4===o.parameter.type?"kxui-Popup-tips-danger":"kxui-Popup-danger")}else if(2!==o.parameter.type&&3!==o.parameter.type&&4!==o.parameter.type)o.title.style.cssText="color:"+o.parameter.diy.color+";background:"+o.parameter.diy.background,o.close.style.cssText="color:"+o.parameter.diy.color+";background:"+o.parameter.diy.background,o.shrink.style.cssText="color:"+o.parameter.diy.color+";background:"+o.parameter.diy.background,5!==o.parameter.type&&(o.btn1.style.cssText="color:"+o.parameter.diy.color+";background:"+o.parameter.diy.background),o.content.style.borderTop="1px solid "+o.parameter.diy.background,e.style.border="1px solid "+o.parameter.diy.background,n.method.addClass(e,"kxui-Popup-diy");else if(3===o.parameter.type)o.bulk.style.background=o.parameter.diy.background,o.bulk.childNodes[0].style.color=o.parameter.diy.color;else if(4===o.parameter.type)t.offsetWidth+t.offsetLeft+e.offsetWidth+30>i().docWidth?e.childNodes[0].style.borderLeft="8px solid "+o.parameter.diy.background:e.childNodes[0].style.borderRight="8px solid "+o.parameter.diy.background,e.childNodes[1].style.cssText="color:"+o.parameter.diy.color+";background:"+o.parameter.diy.background;else{o.loadingText.style.color=o.parameter.diy.color;for(var r=0;r<o.bulk.childNodes.length-1;r++)o.bulk.childNodes[r].style.cssText="color:"+o.parameter.diy.color+";border:0 solid "+o.parameter.diy.color+";background-color:"+o.parameter.diy.color}this.title&&(this.title.innerHTML=void 0===this.alone.title?a:this.alone.title),o.into(e,t)},into:function(e,t){var o=this;d.query("body",o.parameter.topPage).appendChild(e),d.query(".kxui-Popup-move",o.parameter.topPage)||d.query("body",o.parameter.topPage).appendChild(o.move),!d.query(".kxui-Popup-shade",o.parameter.topPage)&&o.parameter.shade&&d.query("body",o.parameter.topPage).appendChild(o.shade),o.last(e,t)},last:function(e,o){var a=this;if(4!==a.parameter.type){for(var r=0;r<p.length&&a.parameter.offset!==p[r];r++)r===p.length-1&&(a.parameter.offset="center");if(5===a.parameter.type&&a.alone.full)e.style.left="0",e.style.top="0";else{if("top"===a.parameter.offset)e.style.top="10px";else if("center"===a.parameter.offset||"left"===a.parameter.offset|"right"===a.parameter.offset){var l=a.parameter.topPage?i().topHeight:i().docHeight/2-e.offsetHeight/2-100;e.style.top=(l>=0?l:0)+"px"}else"bottom"===a.parameter.offset&&(e.style.bottom="10px");if("left"===a.parameter.offset)e.style.left="10px";else if("center"===a.parameter.offset||"top"===a.parameter.offset||"bottom"===a.parameter.offset){var s=a.parameter.topPage?i().topWidth:i().docWidth/2-e.offsetWidth/2;e.style.left=s+"px"}else"right"===a.parameter.offset&&(e.style.right="10px");var d=document.documentElement.clientHeight;e.offsetHeight>d&&(e.style.height=d+"px",e.childNodes[2].style.height=d-90+"px",e.childNodes[2].style.marginBottom="10px")}}else e.style.top=o.offsetTop+"px",o.offsetWidth+o.offsetLeft+e.offsetWidth+30>i().docWidth?(e.style.left=o.offsetLeft-e.offsetWidth+"px",n.method.addClass(e,"kxui-Popup-tips-right"),n.method.addClass(e.childNodes[0],"kxui-Popup-tips-right-arrow")):e.style.left=o.offsetWidth+o.offsetLeft+"px";t(e,a.shade,a.parameter.shade),a.event(e)},event:function(e){var t=this;if(t.parameter.time&&(this.timer=setTimeout(function(){t.parameter.timeCall(),o(e,t.parameter.topPage,t.shade,t.parameter.type)},t.parameter.time),n.method.atrDom(e,"timer",this.timer)),t.alone.shrinkBtn&&(t.shrink.onclick=function(){var e=n.method.atrDom(this,"shrinkState");n.method.addClass(t.bulk,"kxui-Popup-animation"),"min"===e?(n.method.addClass(t.bulk,"kxui-Popup-max"),n.method.delClass(t.shrink,"kxui-icon-max"),n.method.addClass(t.shrink,"kxui-icon-min"),n.method.atrDom(this,"shrinkState","max")):"max"===e&&(n.method.delClass(t.bulk,"kxui-Popup-max"),n.method.delClass(t.shrink,"kxui-icon-min"),n.method.addClass(t.shrink,"kxui-icon-max"),n.method.atrDom(this,"shrinkState","min")),t.alone.shrinkCall(n.method.atrDom(this,"shrinkState"))}),t.alone.closeBtn&&(t.close.onclick=function(){t.alone.closeCall(),clearTimeout(t.timer),o(t.bulk,t.parameter.topPage,t.shade,t.parameter.type)}),"object"===_typeof(t.alone.btn)&&1===t.parameter.type)for(var i=1;i<=t.alone.btn.length;i++)t["btn"+i].index=i,t["btn"+i].onclick=function(){t.alone.event["btn"+this.index](t.parameter.index)};else"function"==typeof t.alone.btn&&0===t.parameter.type&&(t.btn1.onclick=function(){clearTimeout(t.timer),o(t.bulk,t.parameter.topPage,t.shade,t.parameter.type),t.alone.btn(t.parameter.index)});t.parameter.shadeClose&&(t.shade.onclick=function(){t.parameter.shadeCall(),clearTimeout(t.timer),o(t.bulk,t.parameter.topPage,t.shade,t.parameter.type)}),t.content&&(t.content.onclick=function(){a(t.bulk)}),t.eventBulk&&(t.eventBulk.onclick=function(){a(t.bulk)}),4!==t.parameter.type&&t.frameOper()},frameOper:function(){function t(t){a(l.bulk),l.event=t||e.event,p=n.method.hasClass(this,"kxui-Popup-resize"),n.method.delClass(l.bulk,"kxui-Popup-show"),n.method.delClass(l.bulk,"kxui-Popup-animation"),l.dowmX=l.event.clientX,l.dowmY=l.event.clientY,d.doc(l.parameter.topPage).addEventListener("mousemove",o),d.doc(l.parameter.topPage).addEventListener("mouseup",r),n.method.addClass(d.query(".kxui-Popup-move",l.parameter.topPage),"kxui-Popup-move-operation")}function o(t){l.event=t||e.event,p?(l.moveWidth=l.saveWidth+(l.event.clientX-l.dowmX),l.moveHeight=l.saveHeight+(l.event.clientY-l.dowmY),l.moveWidth<=260&&(l.moveWidth=260),l.moveHeight<=140&&(l.moveHeight=140),l.bulk.style.width=l.moveWidth+"px",l.bulk.style.height=l.moveHeight+"px"):(l.moveX=l.event.clientX-l.dowmX+l.saveX,l.moveY=l.event.clientY-l.dowmY+l.saveY,l.moveX<=0&&(l.moveX=0),l.moveY<=0&&(l.moveY=0),l.moveX>=(l.parameter.topPage?i().topWidth:i().docWidth)-l.bulk.offsetWidth&&(l.moveX=(l.parameter.topPage?i().topWidth:i().docWidth)-l.bulk.offsetWidth),l.moveY>=(l.parameter.topPage?i().topHeight:i().docHeight)-l.bulk.offsetHeight&&(l.moveY=(l.parameter.topPage?i().topHeight:i().docHeight)-l.bulk.offsetHeight),l.bulk.style.left=l.moveX+"px",l.bulk.style.top=l.moveY+"px",l.bulk.style.right="auto",l.bulk.style.bottom="auto")}function r(){l.saveX=l.bulk.offsetLeft,l.saveY=l.bulk.offsetTop,l.saveWidth=l.bulk.offsetWidth,l.saveHeight=l.bulk.offsetHeight,d.doc(l.parameter.topPage).removeEventListener("mousemove",o,!1),d.doc(l.parameter.topPage).removeEventListener("mouseup",r,!1),n.method.delClass(d.query(".kxui-Popup-move",l.parameter.topPage),"kxui-Popup-move-operation")}var l=this,p=null;l.saveX=l.bulk.offsetLeft,l.saveY=l.bulk.offsetTop,l.saveWidth=l.bulk.offsetWidth,l.saveHeight=l.bulk.offsetHeight,l.title.addEventListener("mousedown",t),l.resize.addEventListener("mousedown",t)}},function(){if(s)require("./../css/popup.css");else{var e=d.create("link");e.media="all",e.type="text/css",e.rel="stylesheet",e.href=l+"css/popup.css",d.query("head").appendChild(e)}}();var m=function(){this.name="Popup",this.info="Window solution"};m.fn=m.prototype,m.fn.alert=function(e,t){var o="object"===("undefined"==typeof t?"undefined":_typeof(t))?t:{};return this.open(0,o,{text:e,closeBtn:"boolean"!=typeof o.closeBtn||o.closeBtn,closeCall:"function"==typeof o.closeCall?o.closeCall:function(){},title:o.title,btn:"function"==typeof o.btn?o.btn:function(){}})},m.fn.ask=function(e){for(var t="object"===("undefined"==typeof e?"undefined":_typeof(e))?e:{},o="object"===_typeof(t.btn)?t.btn:[],a=[],i=1;i<=o.length;i++)a["btn"+i]="function"==typeof t["btn"+i]?t["btn"+i]:function(){};return this.open(1,t,{closeBtn:"boolean"!=typeof t.closeBtn||t.closeBtn,closeCall:"function"==typeof t.closeCall?t.closeCall:function(){},title:t.title,btn:o,event:a})},m.fn.loading=function(e){var t="object"===("undefined"==typeof e?"undefined":_typeof(e))?e:{};return this.open(2,t,{style:"number"==typeof t.style?t.style<=2&&t.style>=0?t.style:0:"string"==typeof t.style&&parseInt(t.style)<=2&&parseInt(t.style)>=0?parseInt(t.style):0})},m.fn.remind=function(e,t,o){var a="object"===("undefined"==typeof o?"undefined":_typeof(o))?o:"object"===("undefined"==typeof t?"undefined":_typeof(t))?t:"object"===("undefined"==typeof e?"undefined":_typeof(e))?e:{};return this.open(3,a,{text:e===a?"":e,time:"string"==typeof t||"number"==typeof t?t:3e3})},m.fn.tips=function(e,t,o){var a=null,i="object"===("undefined"==typeof o?"undefined":_typeof(o))?o:{};return a="string"==typeof t?d.queryAll(t):"number"==typeof t.length?t:{0:t,length:"1"},this.open(4,i,{text:e,dom:a,time:"string"==typeof i.time||"number"==typeof i.time?i.time:3e3})},m.fn.win=function(e){var t="object"===("undefined"==typeof e?"undefined":_typeof(e))?e:{};return this.open(5,t,{size:"boolean"==typeof t.full&&t.full?["100%","100%"]:"object"===_typeof(t.size)?t.size:"mobile"===n.info().device?["100%","100%"]:["800px","480px"],closeBtn:"boolean"!=typeof t.closeBtn||t.closeBtn,closeCall:"function"==typeof t.closeCall?t.closeCall:function(){},shrinkBtn:"boolean"!=typeof t.shrinkBtn||t.shrinkBtn,shrinkCall:"function"==typeof t.shrinkCall?t.shrinkCall:function(){},full:"boolean"==typeof t.full&&t.full,title:t.title})},m.fn.open=function(e,t,o){var a="object"===_typeof(t.diy)?t.diy:{},i=Math.random();this.skeleton=new u({type:e,text:0===e||3===e||4===e?o.text:5===e?t.content:t.text,style:2===e?o.style:"string"==typeof t.style?t.style:"default",topPage:"boolean"==typeof t.topPage&&t.topPage,shade:"boolean"==typeof t.shade&&t.shade,shadeClose:!("boolean"!=typeof t.shadeClose||!t.shade)&&t.shadeClose,shadeCall:"function"==typeof t.shadeCall&&t.shade&&t.shadeClose?t.shadeCall:function(){},offset:"string"==typeof t.offset?t.offset:"center",scrollBar:"boolean"==typeof t.scrollBar&&t.scrollBar,time:"string"==typeof o.time||"number"==typeof o.time?parseInt(o.time):("string"==typeof t.time||"number"==typeof t.time)&&parseInt(t.time),timeCall:"function"==typeof t.timeCall?t.timeCall:function(){},diy:{color:a.color,background:a.background},index:i,alone:o})},m.fn.close=function(e){var t=e;if("string"==typeof t)switch(e){case"alert":t=["kxui-Popup-alert"];break;case"ask":t=["kxui-Popup-ask"];break;case"loading":t=["kxui-Popup-loading","kxui-Popup-loading-noShade"];break;case"remind":t=["kxui-Popup-remind"];break;case"tips":t=["kxui-Popup-tips"];break;case"win":t=["kxui-Popup-win"]}var o="object"!==("undefined"==typeof t?"undefined":_typeof(t));return this.closeAll(t,o)},m.fn.closeAll=function(e,t){function a(a,r){t?String(n.method.atrDom(a,"index"))===String(e)&&o(a,r,!0,null):o(a,r,!0,null),i(a)}function i(e){n.method.atrDom(e,"timer")&&clearTimeout(n.method.atrDom(e,"timer"))}var r=this;r.cla="object"===("undefined"==typeof e?"undefined":_typeof(e))?e:["kxui-Popup-alert","kxui-Popup-ask","kxui-Popup-loading","kxui-Popup-loading-noShade","kxui-Popup-remind","kxui-Popup-tips","kxui-Popup-win"];for(var l=0;l<r.cla.length;l++){var p=d.queryAll("."+r.cla[l],!0),s=d.queryAll("."+r.cla[l],!1);if(d.doc(!0)===d.doc(!1))for(var u=0;u<s.length;u++)a(s[u],!1);else{for(var m=0;m<s.length;m++)a(s[m],!1);for(var c=0;c<p.length;c++)a(p[c],!0)}}},m.fn.getFrameIndex=function(){return e.name},s?module.exports=new m:n.popup=new m}(window);