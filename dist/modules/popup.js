/**
 * method kxui
 * version 1.4.0
 * author Lkx
 * create time 2018.05.31
 * update time 2018.00.00
 * website http://www.kxui.org
 */

"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function t(e,t,o){o&&(t.style.opacity="1",t.style.zIndex=n,i.method.atrDom(e,"shade",n),i.method.atrDom(t,"shade",n)),a(e),e.style.opacity="1"}function o(e,t,o,a){var n=void 0,s=i.method.getDom(".kxui-Popup-shade",t),r=i.method.getDom(".kxui-Popup-remind",t);if(r&&3===a)e=r,clearTimeout(i.method.atrDom(r,"timer"));else if(3===a)return!1;o&&s&&(n=parseInt(i.method.atrDom(e,"shade"))===parseInt(i.method.atrDom(s,"shade")),n&&(s.style.opacity="0")),i.method.hasClass(i.method.getDom("body",t),"kxui-noScrollBar")&&i.method.delClass(i.method.getDom("body",t),"kxui-noScrollBar"),e.style.opacity="0",i.method.addClass(e,"kxui-Popup-hide"),setTimeout(function(){try{i.method.getDom("body",t).removeChild(e),o&&n&&i.method.getDom("body",t).removeChild(s)}catch(a){}},250)}function a(e){n++,e.style.zIndex=n}var i=e.kxui,n=199202,s=["top","right","bottom","left","center"],r="undefined"!=typeof module&&"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports),d=function(e){this.parameter=e,this.alone=this.parameter.alone,this.timer=null,this.docInfo=this.parameter.topPage?i.info().document.t:i.info().document.c,this.skeleton()};d.prototype={skeleton:function(){4!==this.parameter.type&&(this.bulk=i.method.addDom('<div class="'+(2!==this.parameter.type?"kxui-Popup-bulk":"")+' kxui-Popup-show kxui-Popup-animation" index="'+this.parameter.index+'"></div>'),this.content=i.method.addDom('<div class="kxui-Popup-content"></div>'),this.title=i.method.addDom('<div class="kxui-Popup-title '+(this.alone.closeBtn&&this.alone.shrinkBtn?"kxui-Popup-title-wholeBtn":this.alone.closeBtn||this.alone.shrinkBtn?"kxui-Popup-title-oneBtn":"kxui-Popup-title-noBtn")+'"></div>'),this.shrink=i.method.addDom('<div class="kxui-Popup-shrink kxui-icon '+(this.alone.full?"kxui-icon-min":"kxui-icon-max")+" "+(this.alone.closeBtn?"":"kxui-Popup-shrink-one")+'" shrinkState="'+(this.alone.full?"max":"min")+'"></div>'),this.close=i.method.addDom('<div class="kxui-Popup-close kxui-icon kxui-icon-close"></div>'),this.eventBulk=i.method.addDom('<div class="kxui-Popup-event '+("mobile"===i.info().device?"kxui-Popup-event-mobile":"")+'"></div>'),this.resize=i.method.addDom('<div class="kxui-Popup-resize"></div>'),this.alone.closeBtn&&this.bulk.appendChild(this.close),this.alone.shrinkBtn&&this.bulk.appendChild(this.shrink)),this.move=i.method.addDom('<div class="kxui-Popup-move"></div>'),this.shade=i.method.addDom('<div class="kxui-Popup-shade '+(this.parameter.shadeClose?"kxui-Popup-shade-pointer":"")+'"></div>'),this.parameter.scrollBar&&i.method.addClass(i.method.getDom("body",this.topPage),"kxui-noScrollBar"),this.assemble()},assemble:function(){var e=this,t=e.parameter.type;switch(t){case 0:case 1:if(0===t)e.btn1=i.method.addDom('<div class="'+("mobile"===i.info().device?"kxui-Popup-btn-mobile":"kxui-Popup-btn")+'">确定</div>'),e.eventBulk.appendChild(e.btn1);else if("object"===_typeof(e.alone.btn)&&1===t)for(var a=1;a<=e.alone.btn.length;a++)e["btn"+a]=i.method.addDom('<div class="'+("mobile"===i.info().device?"kxui-Popup-btn-mobile":"kxui-Popup-btn")+'">'+e.alone.btn[a-1]+"</div>"),e.eventBulk.appendChild(e["btn"+a]);e.bulk.appendChild(e.title),e.bulk.appendChild(e.content),e.bulk.appendChild(e.eventBulk),e.content.innerHTML=e.parameter.text||"",i.method.addClass(e.bulk,"kxui-Popup-"+(0===t?"alert":"ask")),i.method.addClass(e.content,"kxui-Popup-"+(0===t?"alert":"ask")+"-content");break;case 2:e.loadingText=i.method.addDom('<p class="kxui-Popup-loading-text '+(2===e.parameter.style?"kxui-Popup-loading-text-special":"")+'">'+(e.parameter.text||"")+"</p>");var n={0:function(){for(var t=0;t<5;t++)e.bulk.appendChild(i.method.addDom("<div></div>")),i.method.addClass(e.bulk,"kxui-Popup-loading-0")},1:function(){for(var t=0;t<3;t++)e.bulk.appendChild(i.method.addDom("<div></div>")),i.method.addClass(e.bulk,"kxui-Popup-loading-1")},2:function(){for(var t=0;t<8;t++)e.bulk.appendChild(i.method.addDom("<div></div>")),i.method.addClass(e.bulk,"kxui-Popup-loading-2")}};n[e.parameter.style](),e.bulk.appendChild(e.loadingText),i.method.addClass(e.bulk,e.parameter.shade?"kxui-Popup-loading":"kxui-Popup-loading-noShade");break;case 3:o(e.bulk,e.parameter.topPage,e.shade,e.parameter.type),e.remindText=i.method.addDom("<p>"+(e.parameter.text||"")+"</p>"),e.bulk.appendChild(e.remindText),i.method.addClass(e.bulk,"kxui-Popup-remind");break;case 4:e.bulk=[],e.arrow=[],e.content=[];for(var s=0;s<e.alone.dom.length;s++)e.bulk[s]=i.method.addDom('<div class="kxui-Popup-tips kxui-Popup-show kxui-Popup-animation" index="'+this.parameter.index+'"></div>'),e.arrow[s]=i.method.addDom('<div class="kxui-Popup-tips-arrow"></div>'),e.content[s]=i.method.addDom('<div class="kxui-Popup-tips-content">'+(e.parameter.text||"")+"</div>"),e.bulk[s].appendChild(e.arrow[s]),e.bulk[s].appendChild(e.content[s]),e.styleStatus(e.bulk[s],e.alone.dom[s]);return;case 5:e.bulk.appendChild(e.resize),e.bulk.appendChild(e.title),e.bulk.appendChild(e.content),"object"===_typeof(e.parameter.text)&&e.parameter.text[1]===!1?e.content.innerHTML=e.parameter.text[0]:(e.iframe=i.method.addDom('<iframe src="'+(e.parameter.text||"")+'" frameborder="0" name="'+this.parameter.index+'" id="'+this.parameter.index+'"></iframe>'),e.content.appendChild(e.iframe)),e.bulk.style.width=e.alone.size[0],e.bulk.style.height=e.alone.size[1],i.method.addClass(e.bulk,"kxui-Popup-win"),i.method.addClass(e.content,"kxui-Popup-win-content")}e.styleStatus(e.bulk)},styleStatus:function(e,t){var o=this,a="提示";if(o.shade.style.background=o.parameter.diy.shade,void 0===o.parameter.diy.color&&void 0===o.parameter.diy.background)switch(o.parameter.style){case"primary":i.method.addClass(e,3===o.parameter.type?"kxui-Popup-remind-primary":4===o.parameter.type?"kxui-Popup-tips-primary":"kxui-Popup-primary");break;case"success":a="成功",i.method.addClass(e,3===o.parameter.type?"kxui-Popup-remind-success":4===o.parameter.type?"kxui-Popup-tips-success":"kxui-Popup-success");break;case"info":a="信息",i.method.addClass(e,3===o.parameter.type?"kxui-Popup-remind-info":4===o.parameter.type?"kxui-Popup-tips-info":"kxui-Popup-info");break;case"warning":a="警告",i.method.addClass(e,3===o.parameter.type?"kxui-Popup-remind-warning":4===o.parameter.type?"kxui-Popup-tips-warning":"kxui-Popup-warning");break;case"danger":a="错误",i.method.addClass(e,3===o.parameter.type?"kxui-Popup-remind-danger":4===o.parameter.type?"kxui-Popup-tips-danger":"kxui-Popup-danger")}else if(2!==o.parameter.type&&3!==o.parameter.type&&4!==o.parameter.type)o.title.style.cssText="color:"+o.parameter.diy.color+";background:"+o.parameter.diy.background,o.close.style.cssText="color:"+o.parameter.diy.color+";background:"+o.parameter.diy.background,o.shrink.style.cssText="color:"+o.parameter.diy.color+";background:"+o.parameter.diy.background,5!==o.parameter.type&&(o.btn1.style.cssText="color:"+o.parameter.diy.color+";background:"+o.parameter.diy.background),o.content.style.borderTop="1px solid "+o.parameter.diy.background,e.style.border="1px solid "+o.parameter.diy.background,i.method.addClass(e,"kxui-Popup-diy");else if(3===o.parameter.type)o.bulk.style.background=o.parameter.diy.background,o.bulk.childNodes[0].style.color=o.parameter.diy.color;else if(4===o.parameter.type)t.offsetWidth+t.offsetLeft+e.offsetWidth+30>i.info().size.cDocW?e.childNodes[0].style.borderLeft="8px solid "+o.parameter.diy.background:e.childNodes[0].style.borderRight="8px solid "+o.parameter.diy.background,e.childNodes[1].style.cssText="color:"+o.parameter.diy.color+";background:"+o.parameter.diy.background;else{o.loadingText.style.color=o.parameter.diy.color;for(var n=0;n<o.bulk.childNodes.length-1;n++)o.bulk.childNodes[n].style.cssText="color:"+o.parameter.diy.color+";border:0 solid "+o.parameter.diy.color+";background-color:"+o.parameter.diy.color}this.title&&(this.title.innerHTML=void 0===this.alone.title?a:this.alone.title),o.into(e,t)},into:function(e,t){var o=this;i.method.getDom("body",o.parameter.topPage).appendChild(e),i.method.getDom(".kxui-Popup-move",o.parameter.topPage)||i.method.getDom("body",o.parameter.topPage).appendChild(o.move),!i.method.getDom(".kxui-Popup-shade",o.parameter.topPage)&&o.parameter.shade&&i.method.getDom("body",o.parameter.topPage).appendChild(o.shade),o.last(e,t)},last:function(e,o){var a=this;if(4!==a.parameter.type){for(var n=0;n<s.length&&a.parameter.offset!==s[n];n++)n===s.length-1&&(a.parameter.offset="center");if(5===a.parameter.type&&a.alone.full)e.style.left="0",e.style.top="0";else{if("top"===a.parameter.offset)e.style.top="10px";else if("center"===a.parameter.offset||"left"===a.parameter.offset|"right"===a.parameter.offset){var r=a.parameter.topPage?i.info().size.tDocH:i.info().size.cDocH/2-e.offsetHeight/2-50;e.style.top=(r>=0?r:0)+"px"}else"bottom"===a.parameter.offset&&(e.style.bottom="10px");if("left"===a.parameter.offset)e.style.left="10px";else if("center"===a.parameter.offset||"top"===a.parameter.offset||"bottom"===a.parameter.offset){var d=a.parameter.topPage?i.info().size.tDocW:i.info().size.cDocW/2-e.offsetWidth/2;e.style.left=d+"px"}else"right"===a.parameter.offset&&(e.style.right="10px");var p=document.documentElement.clientHeight;e.offsetHeight>p&&(e.style.height=p+"px",e.childNodes[2].style.height=p-90+"px",e.childNodes[2].style.marginBottom="10px")}}else e.style.top=o.offsetTop+"px",o.offsetWidth+o.offsetLeft+e.offsetWidth+30>i.info().size.cDocW?(e.style.left=o.offsetLeft-e.offsetWidth+"px",i.method.addClass(e,"kxui-Popup-tips-right"),i.method.addClass(e.childNodes[0],"kxui-Popup-tips-right-arrow")):e.style.left=o.offsetWidth+o.offsetLeft+"px";t(e,a.shade,a.parameter.shade),a.event(e)},event:function(e){var t=this;if(t.parameter.time&&(this.timer=setTimeout(function(){t.parameter.timeCall(),o(e,t.parameter.topPage,t.shade,t.parameter.type)},t.parameter.time),i.method.atrDom(e,"timer",this.timer)),t.alone.shrinkBtn&&(t.shrink.onclick=function(){var e=i.method.atrDom(this,"shrinkState");i.method.addClass(t.bulk,"kxui-Popup-animation"),"min"===e?(i.method.addClass(t.bulk,"kxui-Popup-max"),i.method.delClass(t.shrink,"kxui-icon-max"),i.method.addClass(t.shrink,"kxui-icon-min"),i.method.atrDom(this,"shrinkState","max")):"max"===e&&(i.method.delClass(t.bulk,"kxui-Popup-max"),i.method.delClass(t.shrink,"kxui-icon-min"),i.method.addClass(t.shrink,"kxui-icon-max"),i.method.atrDom(this,"shrinkState","min")),t.alone.shrinkCall(i.method.atrDom(this,"shrinkState"))}),t.alone.closeBtn&&(t.close.onclick=function(){t.alone.closeCall(),clearTimeout(t.timer),o(t.bulk,t.parameter.topPage,t.shade,t.parameter.type)}),"object"===_typeof(t.alone.btn)&&1===t.parameter.type)for(var n=1;n<=t.alone.btn.length;n++)t["btn"+n].index=n,t["btn"+n].onclick=function(){t.alone.event["btn"+this.index](t.parameter.index)};else"function"==typeof t.alone.btn&&0===t.parameter.type&&(t.btn1.onclick=function(){clearTimeout(t.timer),o(t.bulk,t.parameter.topPage,t.shade,t.parameter.type),t.alone.btn(t.parameter.index)});t.parameter.shadeClose&&(t.shade.onclick=function(){t.parameter.shadeCall(),clearTimeout(t.timer),o(t.bulk,t.parameter.topPage,t.shade,t.parameter.type)}),t.content&&(t.content.onclick=function(){a(t.bulk)}),t.eventBulk&&(t.eventBulk.onclick=function(){a(t.bulk)}),4!==t.parameter.type&&t.frameOper()},frameOper:function(){function e(e){a(n.bulk),s=i.method.hasClass(this,"kxui-Popup-resize"),i.method.delClass(n.bulk,"kxui-Popup-show"),i.method.delClass(n.bulk,"kxui-Popup-animation"),n.dowmX=i.method.mouse(e).x,n.dowmY=i.method.mouse(e).y,n.docInfo.addEventListener("mousemove",t),n.docInfo.addEventListener("mouseup",o),i.method.addClass(i.method.getDom(".kxui-Popup-move",n.parameter.topPage),"kxui-Popup-move-operation")}function t(e){s?(n.moveWidth=n.saveWidth+(i.method.mouse(e).x-n.dowmX),n.moveHeight=n.saveHeight+(i.method.mouse(e).y-n.dowmY),n.moveWidth<=260&&(n.moveWidth=260),n.moveHeight<=140&&(n.moveHeight=140),n.bulk.style.width=n.moveWidth+"px",n.bulk.style.height=n.moveHeight+"px"):(n.moveX=i.method.mouse(e).x-n.dowmX+n.saveX,n.moveY=i.method.mouse(e).y-n.dowmY+n.saveY,n.moveX<=0&&(n.moveX=0),n.moveY<=0&&(n.moveY=0),n.moveX>=(n.parameter.topPage?i.info().size.tDocW:i.info().size.cDocW)-n.bulk.offsetWidth&&(n.moveX=(n.parameter.topPage?i.info().size.tDocW:i.info().size.cDocW)-n.bulk.offsetWidth),n.moveY>=(n.parameter.topPage?i.info().size.tDocH:i.info().size.cDocH)-n.bulk.offsetHeight&&(n.moveY=(n.parameter.topPage?i.info().size.tDocH:i.info().size.cDocH)-n.bulk.offsetHeight),n.bulk.style.left=n.moveX+"px",n.bulk.style.top=n.moveY+"px",n.bulk.style.right="auto",n.bulk.style.bottom="auto")}function o(){n.saveX=n.bulk.offsetLeft,n.saveY=n.bulk.offsetTop,n.saveWidth=n.bulk.offsetWidth,n.saveHeight=n.bulk.offsetHeight,n.docInfo.removeEventListener("mousemove",t,!1),n.docInfo.removeEventListener("mouseup",o,!1),i.method.delClass(i.method.getDom(".kxui-Popup-move",n.parameter.topPage),"kxui-Popup-move-operation")}var n=this,s=null;n.saveX=n.bulk.offsetLeft,n.saveY=n.bulk.offsetTop,n.saveWidth=n.bulk.offsetWidth,n.saveHeight=n.bulk.offsetHeight,n.title.addEventListener("mousedown",e),n.resize.addEventListener("mousedown",e)}};var p=function(){this.name="Popup",this.info="Window solution"};p.fn=p.prototype,p.fn.alert=function(e,t){var o="object"===("undefined"==typeof t?"undefined":_typeof(t))?t:{};return this.open(0,o,{text:e,closeBtn:"boolean"!=typeof o.closeBtn||o.closeBtn,closeCall:"function"==typeof o.closeCall?o.closeCall:function(){},title:o.title,btn:"function"==typeof o.btn?o.btn:function(){}})},p.fn.ask=function(e){for(var t="object"===("undefined"==typeof e?"undefined":_typeof(e))?e:{},o="object"===_typeof(t.btn)?t.btn:[],a=[],i=1;i<=o.length;i++)a["btn"+i]="function"==typeof t["btn"+i]?t["btn"+i]:function(){};return this.open(1,t,{closeBtn:"boolean"!=typeof t.closeBtn||t.closeBtn,closeCall:"function"==typeof t.closeCall?t.closeCall:function(){},title:t.title,btn:o,event:a})},p.fn.loading=function(e){var t="object"===("undefined"==typeof e?"undefined":_typeof(e))?e:{};return this.open(2,t,{style:"number"==typeof t.style?t.style<=2&&t.style>=0?t.style:0:"string"==typeof t.style&&parseInt(t.style)<=2&&parseInt(t.style)>=0?parseInt(t.style):0})},p.fn.remind=function(e,t,o){var a="object"===("undefined"==typeof o?"undefined":_typeof(o))?o:"object"===("undefined"==typeof t?"undefined":_typeof(t))?t:"object"===("undefined"==typeof e?"undefined":_typeof(e))?e:{};return this.open(3,a,{text:e===a?"":e,time:"string"==typeof t||"number"==typeof t?t:3e3})},p.fn.tips=function(e,t,o){var a=null,n="object"===("undefined"==typeof o?"undefined":_typeof(o))?o:{};return a="string"==typeof t?i.method.getDom(t):"number"==typeof t.length?t:{0:t,length:"1"},this.open(4,n,{text:e,dom:a,time:"string"==typeof n.time||"number"==typeof n.time?n.time:3e3})},p.fn.win=function(e){var t="object"===("undefined"==typeof e?"undefined":_typeof(e))?e:{};return this.open(5,t,{size:"boolean"==typeof t.full&&t.full?["100%","100%"]:"object"===_typeof(t.size)?t.size:"mobile"===i.info().device?["100%","100%"]:["800px","480px"],closeBtn:"boolean"!=typeof t.closeBtn||t.closeBtn,closeCall:"function"==typeof t.closeCall?t.closeCall:function(){},shrinkBtn:"boolean"!=typeof t.shrinkBtn||t.shrinkBtn,shrinkCall:"function"==typeof t.shrinkCall?t.shrinkCall:function(){},full:"boolean"==typeof t.full&&t.full,title:t.title})},p.fn.open=function(e,t,o){var a="object"===_typeof(t.diy)?t.diy:{},i=Math.random();return this.skeleton=new d({type:e,text:0===e||3===e||4===e?o.text:5===e?t.content:t.text,style:2===e?o.style:"string"==typeof t.style?t.style:"default",topPage:"boolean"==typeof t.topPage&&t.topPage,shade:"boolean"==typeof t.shade&&t.shade,shadeClose:!("boolean"!=typeof t.shadeClose||!t.shade)&&t.shadeClose,shadeCall:"function"==typeof t.shadeCall&&t.shade&&t.shadeClose?t.shadeCall:function(){},offset:"string"==typeof t.offset?t.offset:"center",scrollBar:"boolean"==typeof t.scrollBar&&t.scrollBar,time:"string"==typeof o.time||"number"==typeof o.time?parseInt(o.time):("string"==typeof t.time||"number"==typeof t.time)&&parseInt(t.time),timeCall:"function"==typeof t.timeCall?t.timeCall:function(){},diy:{color:a.color,background:a.background,shade:a.shade},index:i,alone:o}),i},p.fn.close=function(e){var t=e;if("string"==typeof t)switch(e){case"alert":t=["kxui-Popup-alert"];break;case"ask":t=["kxui-Popup-ask"];break;case"loading":t=["kxui-Popup-loading","kxui-Popup-loading-noShade"];break;case"remind":t=["kxui-Popup-remind"];break;case"tips":t=["kxui-Popup-tips"];break;case"win":t=["kxui-Popup-win"]}var o="object"===("undefined"==typeof t?"undefined":_typeof(t));return this.closeAll(t,o)},p.fn.closeAll=function(e,t){function a(a,s){n(a),t?o(a,s,!0,null):String(i.method.atrDom(a,"index"))===String(e)?o(a,s,!0,null):e||o(a,s,!0,null)}function n(e){i.method.atrDom(e,"timer")&&clearTimeout(i.method.atrDom(e,"timer"))}for(var s=t?e:["kxui-Popup-alert","kxui-Popup-ask","kxui-Popup-loading","kxui-Popup-loading-noShade","kxui-Popup-remind","kxui-Popup-tips","kxui-Popup-win"],r=0;r<s.length;r++){var d=i.method.getDom("."+s[r],!0),p=i.method.getDom("."+s[r],!1);if(d&&d.length||p&&p.length){if(d)for(var l=0;l<d.length;l++)a(d[l],!0);else if(p)for(var u=0;u<p.length;u++)a(p[u],!1)}else(d||p)&&(d?a(p,!0):p&&a(p,!1))}},p.fn.getFrameIndex=function(){return e.name},i.popup=new p,r&&(i.popup=module.exports=new p)}(window);